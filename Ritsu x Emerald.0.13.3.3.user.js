// ==UserScript==
// @name         Ritsu x Emerald
// @version      0.13.3.3
// @description  Custom Emerald Chat themes and fixes.
// @author       Atsos/Ritsu, Aqua, Strawberry, Teriyaki
// @icon         https://i.imgur.com/KLtVhho.png
// @match        *://emeraldchat.com/app
// @match        *://www.emeraldchat.com/app
// @namespace    Emerald Bot - Ritsu Project
// @run-at       document-end
// @grant        GM_getValue
// @grant        GM_deleteValue
// @grant        unsafeWindow
// ==/UserScript==
!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=66)}([function(e,t){e.exports=React},function(e,t,o){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o=e[1]||"",n=e[3];if(!n)return o;if(t&&"function"==typeof btoa){var r=(a=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[o].concat(i).concat([r]).join("\n")}var a,s,c;return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);n&&r[c[0]]||(o&&(c[2]?c[2]="".concat(o," and ").concat(c[2]):c[2]=o),t.push(c))}},t}},function(e,t){e.exports=ReactDOM},function(e,t,o){var n=o(51);e.exports="string"==typeof n?n:n.toString()},,,function(e,t,o){"use strict";var n=o(1),r=o.n(n)()(!0);r.push([e.i,'.vkijM9js5qD40n7Lxa8Z5Q\\=\\={margin:2em;text-align:center;color:#e33}.FAVDrTTj78xCOQQ0afY-3Q\\=\\={height:calc(100% - 46px);overflow:auto}.wko3KsMuRizugS2G1lpo9g\\=\\={padding-top:1em}.L0iyDASY7iJqc13r5Q-Mzg\\=\\={width:80px;height:80px}.L0iyDASY7iJqc13r5Q-Mzg\\=\\=:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:6px solid #8ac;border-color:#8ac transparent #8ac transparent;animation:L0iyDASY7iJqc13r5Q-Mzg\\=\\= 1.2s linear infinite}@keyframes L0iyDASY7iJqc13r5Q-Mzg\\=\\={0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.qdUyv9EVJbNAGAWRZbfH1Q\\=\\={margin-left:.5em;cursor:pointer}',"",{version:3,sources:["webpack://src/components/style.module.scss"],names:[],mappings:"AAAA,4BACE,UAAA,CACA,iBAAA,CACA,UAAA,CAGF,4BACE,wBAAA,CACA,aAAA,CAGF,4BACE,eAAA,CAIF,4BACE,UAAA,CACA,WAAA,CAEF,kCACE,WAAA,CACA,aAAA,CACA,UAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CACA,qBAAA,CACA,8CAAA,CACA,yDAAA,CAEF,sCACE,GACE,sBAAA,CAEF,KACE,wBAAA,CAAA,CAIJ,4BACE,gBAAA,CACA,cAAA",sourcesContent:['.reload-warning {\r\n  margin: 2em;\r\n  text-align: center;\r\n  color: #e33;\r\n}\r\n\r\n.ritsu-menu-container {\r\n  height: calc(100% - 46px);\r\n  overflow: auto;\r\n}\r\n\r\n.settings-section {\r\n  padding-top: 1em;\r\n}\r\n\r\n// spinner thingy\r\n.lds-dual-ring {\r\n  width: 80px;\r\n  height: 80px;\r\n}\r\n.lds-dual-ring:after {\r\n  content: " ";\r\n  display: block;\r\n  width: 64px;\r\n  height: 64px;\r\n  margin: 8px;\r\n  border-radius: 50%;\r\n  border: 6px solid #8ac;\r\n  border-color: #8ac transparent #8ac transparent;\r\n  animation: lds-dual-ring 1.2s linear infinite;\r\n}\r\n@keyframes lds-dual-ring {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.permamute-list {\r\n  margin-left: 0.5em;\r\n  cursor: pointer;\r\n}\r\n'],sourceRoot:""}]),r.locals={reloadWarning:"vkijM9js5qD40n7Lxa8Z5Q==",ritsuMenuContainer:"FAVDrTTj78xCOQQ0afY-3Q==",settingsSection:"wko3KsMuRizugS2G1lpo9g==",ldsDualRing:"L0iyDASY7iJqc13r5Q-Mzg==",permamuteList:"qdUyv9EVJbNAGAWRZbfH1Q=="},t.a=r},function(e,t,o){"use strict";(function(e){class o{static makeCrcTable(){let e;const t=new Array(256);for(let o=0;o<256;o+=1){e=o;for(let t=0;t<8;t+=1)e=1&e?3988292384^e>>>1:e>>>1;t[o]=e}return t}static calculate(t){let o=-1;for(let n=0;n<t.length;n+=1)o=o>>>8^this.TABLE[255&(o^(t instanceof e?t[n]:t.charCodeAt(n)))];return(-1^o)>>>0}}o.TABLE=o.makeCrcTable(),t.a=o}).call(this,o(37).Buffer)},function(e,t,o){var n=o(42);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(43);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(44);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(45);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(46);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(47);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(48);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(49);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),a=[];function s(e){for(var t=-1,o=0;o<a.length;o++)if(a[o].identifier===e){t=o;break}return t}function c(e,t){for(var o={},n=[],r=0;r<e.length;r++){var i=e[r],c=t.base?i[0]+t.base:i[0],l=o[c]||0,u="".concat(c," ").concat(l);o[c]=l+1;var d=s(u),m={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(a[d].references++,a[d].updater(m)):a.push({identifier:u,updater:g(m,t),references:1}),n.push(u)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=o.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function m(e,t,o,n){var r=o?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t,o){var n=o.css,r=o.media,i=o.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var h=null,p=0;function g(e,t){var o,n,r;if(t.singleton){var i=p++;o=h||(h=l(t)),n=m.bind(null,o,i,!1),r=m.bind(null,o,i,!0)}else o=l(t),n=f.bind(null,o,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var o=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<o.length;n++){var r=s(o[n]);a[r].references--}for(var i=c(e,t),l=0;l<o.length;l++){var u=s(o[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}o=i}}}},function(e,t,o){var n=o(50);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(52);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(53);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(54);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(55);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(56);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(57);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(58);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(59);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(60);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(61);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(62);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(63);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(64);e.exports="string"==typeof n?n:n.toString()},function(e,t,o){var n=o(65);e.exports="string"==typeof n?n:n.toString()},,,,,,function(e,t,o){"use strict";(function(e){var n=o(39),r=o(40),i=o(41);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,o){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,o);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,o)}function l(e,t,o,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,o,n){if(t.byteLength,o<0||t.byteLength<o)throw new RangeError("'offset' is out of bounds");if(t.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===o&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,o):new Uint8Array(t,o,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=m(e,t);return e}(e,t,o,n):"string"==typeof t?function(e,t,o){"string"==typeof o&&""!==o||(o="utf8");if(!c.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|h(t,o),r=(e=s(e,n)).write(t,o);r!==n&&(e=e.slice(0,r));return e}(e,t,o):function(e,t){if(c.isBuffer(t)){var o=0|f(t.length);return 0===(e=s(e,o)).length||t.copy(e,0,0,o),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):m(e,t);if("Buffer"===t.type&&i(t.data))return m(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var o=0;o<t;++o)e[o]=0;return e}function m(e,t){var o=t.length<0?0:0|f(t.length);e=s(e,o);for(var n=0;n<o;n+=1)e[n]=255&t[n];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var o=e.length;if(0===o)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return F(e).length;default:if(n)return G(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,o){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,o);case"utf8":case"utf-8":return M(this,t,o);case"ascii":return N(this,t,o);case"latin1":case"binary":return E(this,t,o);case"base64":return A(this,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,o);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}function b(e,t,o,n,r){if(0===e.length)return-1;if("string"==typeof o?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=r?0:e.length-1),o<0&&(o=e.length+o),o>=e.length){if(r)return-1;o=e.length-1}else if(o<0){if(!r)return-1;o=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,o,n,r);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,o):Uint8Array.prototype.lastIndexOf.call(e,t,o):v(e,[t],o,n,r);throw new TypeError("val must be string, number or Buffer")}function v(e,t,o,n,r){var i,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,o/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var u=-1;for(i=o;i<s;i++)if(l(e,i)===l(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*a}else-1!==u&&(i-=i-u),u=-1}else for(o+c>s&&(o=s-c),i=o;i>=0;i--){for(var d=!0,m=0;m<c;m++)if(l(e,i+m)!==l(t,m)){d=!1;break}if(d)return i}return-1}function y(e,t,o,n){o=Number(o)||0;var r=e.length-o;n?(n=Number(n))>r&&(n=r):n=r;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[o+a]=s}return a}function w(e,t,o,n){return V(G(t,e.length-o),e,o,n)}function k(e,t,o,n){return V(function(e){for(var t=[],o=0;o<e.length;++o)t.push(255&e.charCodeAt(o));return t}(t),e,o,n)}function x(e,t,o,n){return k(e,t,o,n)}function R(e,t,o,n){return V(F(t),e,o,n)}function C(e,t,o,n){return V(function(e,t){for(var o,n,r,i=[],a=0;a<e.length&&!((t-=2)<0);++a)o=e.charCodeAt(a),n=o>>8,r=o%256,i.push(r),i.push(n);return i}(t,e.length-o),e,o,n)}function A(e,t,o){return 0===t&&o===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,o))}function M(e,t,o){o=Math.min(e.length,o);for(var n=[],r=t;r<o;){var i,a,s,c,l=e[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=o)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(i=e[r+1]))&&(c=(31&l)<<6|63&i)>127&&(u=c);break;case 3:i=e[r+1],a=e[r+2],128==(192&i)&&128==(192&a)&&(c=(15&l)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:i=e[r+1],a=e[r+2],s=e[r+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var o="",n=0;for(;n<t;)o+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return o}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,o){return l(null,e,t,o)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,o){return function(e,t,o,n){return u(t),t<=0?s(e,t):void 0!==o?"string"==typeof n?s(e,t).fill(o,n):s(e,t).fill(o):s(e,t)}(null,e,t,o)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var o=e.length,n=t.length,r=0,i=Math.min(o,n);r<i;++r)if(e[r]!==t[r]){o=e[r],n=t[r];break}return o<n?-1:n<o?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var o;if(void 0===t)for(t=0,o=0;o<e.length;++o)t+=e[o].length;var n=c.allocUnsafe(t),r=0;for(o=0;o<e.length;++o){var a=e[o];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):p.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",o=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,o).match(/.{2}/g).join(" "),this.length>o&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,o,n,r){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===o&&(o=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||o>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=o)return 0;if(n>=r)return-1;if(t>=o)return 1;if(this===e)return 0;for(var i=(r>>>=0)-(n>>>=0),a=(o>>>=0)-(t>>>=0),s=Math.min(i,a),l=this.slice(n,r),u=e.slice(t,o),d=0;d<s;++d)if(l[d]!==u[d]){i=l[d],a=u[d];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,o){return-1!==this.indexOf(e,t,o)},c.prototype.indexOf=function(e,t,o){return b(this,e,t,o,!0)},c.prototype.lastIndexOf=function(e,t,o){return b(this,e,t,o,!1)},c.prototype.write=function(e,t,o,n){if(void 0===t)n="utf8",o=this.length,t=0;else if(void 0===o&&"string"==typeof t)n=t,o=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var r=this.length-t;if((void 0===o||o>r)&&(o=r),e.length>0&&(o<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return y(this,e,t,o);case"utf8":case"utf-8":return w(this,e,t,o);case"ascii":return k(this,e,t,o);case"latin1":case"binary":return x(this,e,t,o);case"base64":return R(this,e,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,o);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(e,t,o){var n="";o=Math.min(e.length,o);for(var r=t;r<o;++r)n+=String.fromCharCode(127&e[r]);return n}function E(e,t,o){var n="";o=Math.min(e.length,o);for(var r=t;r<o;++r)n+=String.fromCharCode(e[r]);return n}function S(e,t,o){var n=e.length;(!t||t<0)&&(t=0),(!o||o<0||o>n)&&(o=n);for(var r="",i=t;i<o;++i)r+=B(e[i]);return r}function _(e,t,o){for(var n=e.slice(t,o),r="",i=0;i<n.length;i+=2)r+=String.fromCharCode(n[i]+256*n[i+1]);return r}function T(e,t,o){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>o)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,o,n,r,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<i)throw new RangeError('"value" argument is out of bounds');if(o+n>e.length)throw new RangeError("Index out of range")}function j(e,t,o,n){t<0&&(t=65535+t+1);for(var r=0,i=Math.min(e.length-o,2);r<i;++r)e[o+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function $(e,t,o,n){t<0&&(t=4294967295+t+1);for(var r=0,i=Math.min(e.length-o,4);r<i;++r)e[o+r]=t>>>8*(n?r:3-r)&255}function O(e,t,o,n,r,i){if(o+n>e.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function P(e,t,o,n,i){return i||O(e,0,o,4),r.write(e,t,o,n,23,4),o+4}function I(e,t,o,n,i){return i||O(e,0,o,8),r.write(e,t,o,n,52,8),o+8}c.prototype.slice=function(e,t){var o,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=c.prototype;else{var r=t-e;o=new c(r,void 0);for(var i=0;i<r;++i)o[i]=this[i+e]}return o},c.prototype.readUIntLE=function(e,t,o){e|=0,t|=0,o||T(e,t,this.length);for(var n=this[e],r=1,i=0;++i<t&&(r*=256);)n+=this[e+i]*r;return n},c.prototype.readUIntBE=function(e,t,o){e|=0,t|=0,o||T(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},c.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,o){e|=0,t|=0,o||T(e,t,this.length);for(var n=this[e],r=1,i=0;++i<t&&(r*=256);)n+=this[e+i]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,o){e|=0,t|=0,o||T(e,t,this.length);for(var n=t,r=1,i=this[e+--n];n>0&&(r*=256);)i+=this[e+--n]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var o=this[e]|this[e+1]<<8;return 32768&o?4294901760|o:o},c.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var o=this[e+1]|this[e]<<8;return 32768&o?4294901760|o:o},c.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),r.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),r.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),r.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),r.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,o,n){(e=+e,t|=0,o|=0,n)||U(this,e,t,o,Math.pow(2,8*o)-1,0);var r=1,i=0;for(this[t]=255&e;++i<o&&(r*=256);)this[t+i]=e/r&255;return t+o},c.prototype.writeUIntBE=function(e,t,o,n){(e=+e,t|=0,o|=0,n)||U(this,e,t,o,Math.pow(2,8*o)-1,0);var r=o-1,i=1;for(this[t+r]=255&e;--r>=0&&(i*=256);)this[t+r]=e/i&255;return t+o},c.prototype.writeUInt8=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):$(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,o,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*o-1);U(this,e,t,o,r-1,-r)}var i=0,a=1,s=0;for(this[t]=255&e;++i<o&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+o},c.prototype.writeIntBE=function(e,t,o,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*o-1);U(this,e,t,o,r-1,-r)}var i=o-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+o},c.prototype.writeInt8=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):$(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,o){return e=+e,t|=0,o||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,o){return P(this,e,t,!0,o)},c.prototype.writeFloatBE=function(e,t,o){return P(this,e,t,!1,o)},c.prototype.writeDoubleLE=function(e,t,o){return I(this,e,t,!0,o)},c.prototype.writeDoubleBE=function(e,t,o){return I(this,e,t,!1,o)},c.prototype.copy=function(e,t,o,n){if(o||(o=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<o&&(n=o),n===o)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-o&&(n=e.length-t+o);var r,i=n-o;if(this===e&&o<t&&t<n)for(r=i-1;r>=0;--r)e[r+t]=this[r+o];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)e[r+t]=this[r+o];else Uint8Array.prototype.set.call(e,this.subarray(o,o+i),t);return i},c.prototype.fill=function(e,t,o,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<o)throw new RangeError("Out of range index");if(o<=t)return this;var i;if(t>>>=0,o=void 0===o?this.length:o>>>0,e||(e=0),"number"==typeof e)for(i=t;i<o;++i)this[i]=e;else{var a=c.isBuffer(e)?e:G(new c(e,n).toString()),s=a.length;for(i=0;i<o-t;++i)this[i+t]=a[i%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){var o;t=t||1/0;for(var n=e.length,r=null,i=[],a=0;a<n;++a){if((o=e.charCodeAt(a))>55295&&o<57344){if(!r){if(o>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}r=o;continue}if(o<56320){(t-=3)>-1&&i.push(239,191,189),r=o;continue}o=65536+(r-55296<<10|o-56320)}else r&&(t-=3)>-1&&i.push(239,191,189);if(r=null,o<128){if((t-=1)<0)break;i.push(o)}else if(o<2048){if((t-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((t-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function F(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,o,n){for(var r=0;r<n&&!(r+o>=t.length||r>=e.length);++r)t[r+o]=e[r];return r}}).call(this,o(38))},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},function(e,t,o){"use strict";t.byteLength=function(e){var t=l(e),o=t[0],n=t[1];return 3*(o+n)/4-n},t.toByteArray=function(e){var t,o,n=l(e),a=n[0],s=n[1],c=new i(function(e,t,o){return 3*(t+o)/4-o}(0,a,s)),u=0,d=s>0?a-4:a;for(o=0;o<d;o+=4)t=r[e.charCodeAt(o)]<<18|r[e.charCodeAt(o+1)]<<12|r[e.charCodeAt(o+2)]<<6|r[e.charCodeAt(o+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===s&&(t=r[e.charCodeAt(o)]<<2|r[e.charCodeAt(o+1)]>>4,c[u++]=255&t);1===s&&(t=r[e.charCodeAt(o)]<<10|r[e.charCodeAt(o+1)]<<4|r[e.charCodeAt(o+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,o=e.length,r=o%3,i=[],a=0,s=o-r;a<s;a+=16383)i.push(u(e,a,a+16383>s?s:a+16383));1===r?(t=e[o-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[o-2]<<8)+e[o-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)n[s]=a[s],r[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=e.indexOf("=");return-1===o&&(o=t),[o,o===t?0:4-o%4]}function u(e,t,o){for(var r,i,a=[],s=t;s<o;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(i=r)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,o,n,r){var i,a,s=8*r-n-1,c=(1<<s)-1,l=c>>1,u=-7,d=o?r-1:0,m=o?-1:1,f=e[t+d];for(d+=m,i=f&(1<<-u)-1,f>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=m,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=n;u>0;a=256*a+e[t+d],d+=m,u-=8);if(0===i)i=1-l;else{if(i===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),i-=l}return(f?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,o,n,r,i){var a,s,c,l=8*i-r-1,u=(1<<l)-1,d=u>>1,m=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,h=n?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?m/c:m*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,r),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;e[o+f]=255&s,f+=h,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;e[o+f]=255&a,f+=h,a/=256,l-=8);e[o+f-h]|=128*p}},function(e,t){var o={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==o.call(e)}},function(e,t,o){var n=o(1)(!1);n.push([e.i,"html.adBlocker .emerald-jumbotron-message{display:none}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".top-message{position:absolute;top:2px;font-size:1.5em;font-weight:bold;padding:6px;margin:auto;border:solid 4px #800;border-radius:8px;background-color:#f88;color:#300;cursor:pointer}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,"html.imgBlur div.ritsu-would-blur>img{filter:blur(7px);transition:filter 1s ease}html.imgBlur div:hover.ritsu-would-blur>img{filter:blur(0px)}.room-component-message-text.room-component-message-text,.notification-unit-body.notification-unit-body{overflow:visible}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,"html.showGender .room-component-message-avatar,html.showGender .navigation-notification-unit-image{border-color:#fff;border:2px inset;width:36px;height:36px;margin:-2px 10px -2px -2px}html.showGender .room-component-message-avatar[data-gender=m],html.showGender .navigation-notification-unit-image[data-gender=m]{border-color:#0070ff}html.showGender .room-component-message-avatar[data-gender=f],html.showGender .navigation-notification-unit-image[data-gender=f]{border-color:#ff80ea}html.showGender .room-component-message-avatar[data-gender=pizza],html.showGender .navigation-notification-unit-image[data-gender=pizza]{border-color:#00f0dc}html.showGender .room-component-message-avatar[data-gender=vortex],html.showGender .navigation-notification-unit-image[data-gender=vortex]{border-color:#bf0390}html.showGender .room-component-message-avatar[data-gender=sunflower],html.showGender .navigation-notification-unit-image[data-gender=sunflower]{border-color:#ffc107}html.showGender .room-component-message-avatar[data-gender=rose],html.showGender .navigation-notification-unit-image[data-gender=rose]{border-color:maroon}html.showGender .room-component-message-avatar[data-gender=watermelon],html.showGender .navigation-notification-unit-image[data-gender=watermelon]{border-color:#18e281}html.showGender .room-component-message-avatar{width:42px;height:42px}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".notification-count-overlay,.name-count-overlay{background:#00dced;color:#00222a;font-size:11px;font-weight:700;border:solid;border-color:#36393e;border-width:2px;margin-left:-25px;margin-right:9px;padding:3px}.container,.room-component-container{height:100% !important}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".karma-tracker,.karma-delta{display:none}html.trackKarma .karma-tracker{display:inline-block;line-height:14px;height:32px;vertical-align:middle;font-size:1.3em;padding-left:.5em;color:var(--menu-fg-color)}html.trackKarma .karma-delta{display:block;position:absolute;top:50%;left:50%;opacity:1;transform:translateX(-50%) translateY(-50%) scale(0.1);transition:all 2s ease-out;pointer-events:none}html.trackKarma .karma-delta.positive{color:green}html.trackKarma .karma-delta.negative{color:red}html.trackKarma .karma-delta.zoom{opacity:0;transform:translateX(-50%) translateY(-50%) scale(20)}html.trackKarma .notification-unit-body.down{background:#ff808080}html.trackKarma .notification-unit-body.up{background:#80ff8080}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".room-component-message-right{flex-direction:row;justify-content:flex-start;align-items:baseline}.user-badge-container{align-self:center}.user-badge-tick{display:flex;position:static}.room-component-flair{max-width:100%}.jumbo-message:not(.ritsu-message-hidden>*){font-size:5em}.user-extra{padding:0 .5em}html.imgBlur .ritsu-would-blur{filter:blur(4px);transition:filter .3s}html.imgBlur .ritsu-would-blur-heavy{filter:blur(8px);transition:filter .3s}html.imgBlur .ritsu-would-blur:hover,html.imgBlur .ritsu-would-blur-heavy:hover{filter:blur(0px)}.text-only{max-height:8em;overflow:auto !important}div.ritsu-avatar-hidden{color:var(--app-fg-color);font-size:32px;padding:3px}.blocked-image{border:1px solid red;border-radius:5px;padding:2px}.warning-text{padding:2px;margin:2px;font-size:14px;line-height:1.5;font-weight:bold;color:#7c2626;text-align:justify}.message-image{width:auto;height:auto;max-height:240px;max-width:80%;border-radius:4px;margin:4px;cursor:pointer}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".embed{width:auto !important;height:auto !important;object-fit:contain;margin-top:2px}.img-fluid{width:100%;height:100%;max-width:300px;max-height:300px;object-fit:contain}.spotify{width:100%;max-width:300px;border-radius:6px;frameborder:0}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,'.main-logo.main-logo{height:38px}.user-profile-pictures-picture-preview{background:url(https://i.imgur.com/2DVJSYQ.gif)}.room-component-message-picture-container{position:relative}.picture-control{display:none;position:absolute;top:0;font-size:2em;font-weight:900}.room-component-message-picture:hover+.picture-control,.picture-control:hover{display:block;cursor:pointer}.picture-button{padding:.5em;border:1px solid var(--app-fg-color);border-radius:2px;background:var(--app-bg-color);color:var(--app-fg-color)}.picture-button.block:hover{color:red}.picture-button.save:hover{color:green}.image-grid div{display:inline-block;width:6em;height:6em;margin:5px;background-size:contain;background-repeat:no-repeat;background-position:center;cursor:pointer}.image-grid div>div{width:unset;height:unset;zoom:.6}.disable-after::after{content:"";display:none}.picker-flair-select{height:3em !important;vertical-align:bottom}.navigation-dropdown-ritsu{color:#f965fec4}.main-logo-text{display:inline-block;line-height:14px;height:32px;vertical-align:middle;font-size:1.3em;padding-left:.5em}@media screen and (max-width: 640px){.main-logo-text{display:none}}body.themeChange *{transition:background-color .3s,color .3s,border-color .3s}@media screen and (min-width: 640px){body{overflow:hidden}}body.tmp-message span.room-component-print:last-of-type{margin:-1em 0}.user-profile-micro.user-profile-micro{width:auto;max-width:400px}.navigation-notification-badge{position:absolute}.channel-expand-icon{padding:8px}.ritsu-icon-network-unavail{color:red !important}html:not(.network-unavail) .ritsu-icon-network-unavail{display:none}.navigation-notification-unit-message{margin-left:8px}',""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,":root{--ritsu-hair-color: #f965fec4;--ritsu-hair-dark-color: #b821bd}html>body{background:var(--app-bg-color)}body>div>nav{background:var(--header-bg-color)}.room-component-left.room-component-left{background:var(--roomlist-bg-color)}.room-component-center.room-component-center{background:var(--chat-bg-color)}.room-component-right.room-component-right{background:var(--userlist-bg-color)}.room-component-messages{background:var(--chat-bg-color)}.room-notification.room-notification{background:var(--chat-bg-color)}.room-component-print.room-component-print{color:var(--message-fg-color)}.room-component-input{background:var(--input-bg-color)}.room-component-input-textarea.room-component-input-textarea{color:var(--input-fg-color)}.ui-button-match{background:var(--input-bg-color)}#container{background:var(--app-bg-color)}.room-component-container.room-component-container{color:var(--app-fg-color)}.dashboard-button.animated.zoomIn,.dashboard-button{background:var(--dashboard-button-bg-color)}.navigation-notification-icons.navigation-notification-icons{background:transparent}.ui-search-box{background:var(--search-bg-color);color:var(--search-fg-color)}.side-panel.side-panel{background:var(--panel-bg-color)}.actionicon-mega.actionicon-mega{color:var(--panel-fg-color)}.actionicon-mega.actionicon-mega:hover{background:var(--item-hover-bg-color)}.ui-bg.ui-bg{background:var(--dialog-overlay-bg-color)}.ui-menu.ui-menu,.notification-unit.notification-unit{background:var(--dialog-bg-color);color:var(--dialog-fg-color)}.ui-interests-bg.ui-interests-bg{background:var(--interests-bg-color) !important}.navigation-notification-unit.navigation-notification-unit:hover{background:var(--header-hover-bg-color);color:var(--header-hover-fg-color)}.navigation-notification-unit{color:var(--header-fg-color)}:last-child>.navigation-notification-unit{color:var(--header-hover-fg-color)}.navigation-dropdown-content.navigation-dropdown-content{background:var(--menu-bg-color);color:var(--menu-fg-color)}.dashboard-icon.dashboard-icon{color:var(--dashboard-icon-fg-color)}.dashboard-button.dashboard-button:hover{color:var(--dashboard-hover-fg-color);background:var(--dashboard-hover-bg-color)}.actionicon-icon.actionicon-icon{color:var(--dashboard-icon-fg-color)}.main-hamburger.main-hamburger{color:var(--header-fg-color)}.main-hamburger.main-hamburger:hover,.main-logo.main-logo:hover{background:var(--header-hover-bg-color) !important;color:var(--header-hover-fg-color)}.user-profile-menu.user-profile-menu{background:var(--dialog-bg-color)}.user-micropost-input-background.user-micropost-input-background{background:var(--dialog-input-bg-color)}.user-micropost-input.user-micropost-input{color:var(--dialog-input-fg-color)}.ui-button-micro.ui-button-micro{background:var(--dialog-button-bg-color);color:var(--dialog-button-fg-color)}.user-profile-tab.user-profile-tab,.ui-tab.ui-tab{color:var(--tab-fg-color)}.user-profile-tab-active.user-profile-tab-active,.ui-tab-active.ui-tab-active{color:var(--tab-active-fg-color)}.ui-button-mega.ui-button-mega:hover{background:var(--dialog-button-hover-bg-color);color:var(--dialog-button-hover-fg-color)}.ui-button-mega.ui-button-mega{background:var(--dialog-button-bg-color);color:var(--dialog-button-fg-color)}.ui-input.ui-input{background:var(--dialog-input-bg-color) !important;color:var(--input-fg-color)}.dashboard-card-image.dashboard-card-image{border-color:var(--dashboard-icon-fg-color)}.user-comment-input-background.user-comment-input-background{background:var(--dialog-input-bg-color)}.user-comment-input.user-comment-input{color:var(--dialog-input-fg-color)}.room-component-left .room-user-label{color:var(--roomlist-title-fg-color)}.room-component-right .room-user-label{color:var(--userlist-title-fg-color)}.picture-upload-button.picture-upload-button+label{background:var(--upload-button-bg-color);color:var(--upload-button-fg-color)}.main-logo-text{color:var(--menu-fg-color)}.navigation-dropdown-ritsu{color:var(--ritsu-menu-fg-color)}.navigation-dropdown-ritsu:hover{color:var(--ritsu-menu-hover-fg-color)}.notification-menu-container-text{color:var(--dialog-fg-color)}.notification-menu-container-text span{text-shadow:#000 0 0 3px}.user-flair.user-flair,.user-extra-gender{text-shadow:-0.05em -0.05em #fff5}.user-profile-picture-wrapper .btn{margin-top:.2rem;margin-bottom:.5rem;color:var(--upload-button-fg-color);border:solid;border-color:#26292f;border-width:2px;background-color:var(--dashboard-icon-bg-color)}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,":root{--header-bg-color: #100f10;--header-alt-bg-color: #232529;--header-hover-bg-color: #3d4046;--app-bg-color: black;--dialog-bg-color: #111;--dialog-overlay-bg-color: rgba(0, 0, 0, 0.93);--dialog-button-bg-color: #17191b;--dialog-button-hover-bg-color: #151515;--dialog-input-bg-color: #17191b;--dashboard-button-bg-color: #100f10;--dashboard-hover-bg-color: #33323270;--roomlist-bg-color: black;--chat-bg-color: black;--userlist-bg-color: black;--input-bg-color: #211f21;--search-bg-color: #0b0b0b;--panel-bg-color: #0c0c0c;--item-hover-bg-color: #35383e;--interests-bg-color: #2c2f35;--menu-bg-color: #0a0a0a;--upload-button-bg-color: #41444a;--header-fg-color: white;--header-hover-fg-color: var(--ritsu-hair-color);--app-fg-color: #bebfc5;--dialog-fg-color: #f1f1f2;--dialog-button-fg-color: #d5dcec;--dialog-button-hover-fg-color: var(--ritsu-hair-color);--dialog-input-fg-color: #d7dfec;--dashboard-icon-fg-color: var(--ritsu-hair-color);--dashboard-hover-fg-color: var(--ritsu-hair-color);--roomlist-title-fg-color: #99a3b4;--userlist-title-fg-color: #99a3b4;--tab-fg-color: #c2c8d6;--tab-active-fg-color: var(--ritsu-hair-color);--message-fg-color: #afbacd;--input-fg-color: #caccd0;--search-fg-color: #f0f0f1;--panel-fg-color: white;--menu-fg-color: white;--upload-button-fg-color: #b4bccc;--ritsu-menu-fg-color: var(--ritsu-hair-color);--ritsu-menu-hover-fg-color: var(--ritsu-hair-color)}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,":root{--header-bg-color: #bbb;--header-alt-bg-color: #ccc;--header-hover-bg-color: #aaa;--app-bg-color: #ddd;--dialog-bg-color: #ddd;--dialog-overlay-bg-color: rgba(0, 0, 0, 0.5);--dialog-button-bg-color: #cfdeec;--dialog-button-hover-bg-color: #f0f0f0;--dialog-input-bg-color: #cfdeec;--dashboard-button-bg-color: #f0e4f0;--dashboard-hover-bg-color: #cfcdcd70;--roomlist-bg-color: #ccc;--chat-bg-color: #ddd;--userlist-bg-color: #ccc;--input-bg-color: #fff;--search-bg-color: #f7f7f7;--panel-bg-color: #ccc;--item-hover-bg-color: #a3adc0;--interests-bg-color: #aab6ce;--menu-bg-color: #aaa;--upload-button-bg-color: #ccc;--header-fg-color: #333;--header-hover-fg-color: var(--ritsu-hair-dark-color);--app-fg-color: #333;--dialog-fg-color: #333;--dialog-button-fg-color: #000;--dialog-button-hover-fg-color: var(--ritsu-hair-dark-color);--dialog-input-fg-color: #000;--dashboard-icon-fg-color: var(--ritsu-hair-dark-color);--dashboard-hover-fg-color: var(--ritsu-hair-dark-color);--roomlist-title-fg-color: #555;--userlist-title-fg-color: #555;--tab-fg-color: #444;--tab-active-fg-color: var(--ritsu-hair-dark-color);--message-fg-color: #666;--input-fg-color: #222;--search-fg-color: #222;--panel-fg-color: #333;--menu-fg-color: #333;--upload-button-fg-color: #444;--ritsu-menu-fg-color: var(--ritsu-hair-dark-color);--ritsu-menu-hover-fg-color: var(--ritsu-hair-color)}.user-flair.user-flair,.user-extra-gender{text-shadow:1px 1px 1px #000}.actionicon-mega.actionicon-mega:hover{background:#aaa}.ui-button-text.ui-button-text:hover{color:#666}.user-profile-menu.user-profile-menu{background:#ddd;color:#333}.user-micropost-unit.user-micropost-unit{color:#333}.ritsu-menu-container li{color:#666}.ritsu-menu-container li.selected{color:#222}.ritsu-menu-container li:hover{background:#fff}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".notification-unit.notification-unit{background:var(--dialog-bg-color);color:var(--white-label)}.user-profile-interest{background:var(--last-child);color:#fff}:last-child>.navigation-notification-unit{color:var(--green-label)}.user-profile-menu.user-profile-menu{background:var(--dialog-bg-color);color:var(--yellow-label)}.user-micropost-input-background.user-micropost-input-background{background:var(--dialog-input-bg-color)}.user-micropost-input.user-micropost-input{color:var(--dialog-input-fg-color)}.ui-button-micro.ui-button-micro{background:var(--dialog-button-bg-color);color:var(--white-label)}.ui-button-mega.ui-button-mega{background:var(--dialog-button-bg-color);color:var(--golden-label)}.notification-menu-container-text{color:var(--pink-label)}.notification-menu-container-text span{text-shadow:#000 0 0 3px}.ui-button-mega-icon{color:var(--last-child)}.m1{color:var(--cyan-label)}.m2{color:var(--cyan-label)}.m4{color:var(--cyan-label)}label{color:var(--violet-blue-label)}.user-profile-sub{color:var(--white-label)}.notification-menu-container-text2{color:var(--violet-blue-label)}.ui-button{background:var(--last-child);color:var(--white-label)}.ui-button:hover{background:var(--last-child-light);color:var(--white-label)}.ui-button-text{color:var(--white-label)}.ui-menu-text{color:var(--violet-blue-label)}.ui-button-match-mega{background:var(--last-child);color:var(--white-label)}.ui-button-match-mega:hover{background:var(--last-child-light);color:var(--white-label)}.user-profile-micro-top{background:var(--darkie-label)}.user-profile-micro-button{background:var(--darkie-label)}.label{color:var(--golden-label)}[type=radio]:checked+label:after{background-color:var(--green-aqua-label)}[type=checkbox]:checked+label:before{border-right:2px solid #0eeca0;border-bottom:2px solid #0eeca0}.room-component-message-avatar,html.showGender,.navigation-notification-unit-image,.main-logo,.dashboard-card-image,.user-profile-micro-avatar,.user-profile-avatar,.user-micropost-picture,.user-comment-picture,.user-profile-picture-hover{border-radius:10px}.user-online-icon-profile{margin-left:-27px}:root{--app-bg-color: black;--dialog-bg-color: #111;--dialog-overlay-bg-color: rgba(0, 0, 0, 0.93);--dialog-button-bg-color: #17191b;--dialog-button-hover-bg-color: #151515;--dialog-input-bg-color: #17191b;--dashboard-button-bg-color: #100f10;--dashboard-hover-bg-color: #33323270;--header-bg-color: #100f10;--userlist-bg-color: black;--header-bg-color: #100f10;--header-alt-bg-color: #3d4046;--header-hover-bg-color: #3d4046;--input-bg-color: #211f21;--roomlist-bg-color: black;--interests-bg-color: #2c2f35;--chat-bg-color: black;--userlist-bg-color: black;--search-bg-color: #0b0b0b;--panel-bg-color: #0c0c0c;--item-hover-bg-color: #35383e;--upload-button-bg-color: #41444a;--menu-bg-color: #0a0a0a;--header-fg-color: #e6fc6d;--header-alt-fg-color: #232529;--panel-fg-color: white;--last-child: #b821bd;--last-child-light: #ee71f2;--emerald-label: #18e281;--violet-blue-label: #8e95f9;--green-label: #b9fc6d;--golden-label: #ffc107;--scarlet-label: #9ddb60;--green-aqua-label: #0eeca0;--golden-light-label: #ffe8a3;--pink-label: #ffb3d1;--dark-violet: #9c3edd;--cyan-label: #3fffe5;--yellow-label: #fefb1f;--darkie-label: #0932a7;--white-label: #e0e0e0;--input-fg-color: var(--white-label);--search-fg-color: var(--white-label);--roomlist-title-fg-color: var(--emerald-label);--userlist-title-fg-color: var(--emerald-label);--message-fg-color: var(--green-label);--user-profile-tab-active: var(--green-label);--dialog-button-hover-fg-color: var(--golden-light-label);--upload-button-fg-color: var(--golden-label);--dashboard-icon-fg-color: var(--ritsu-hair-dark-color);--main-logo-text: var(--green-label);--app-fg-color: var(--white-label);--dialog-fg-color: var(--scarlet-label);--dashboard-hover-fg-color: var(--golden-label);--ritsu-hair-color: var(--green-label);--ritsu-hair-dark-color: var(--green-label);--ritsu-menu-fg-color: var(--ritsu-hair-color);--ritsu-menu-hover-fg-color: var(--ritsu-hair-color)}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".notification-unit.notification-unit{background:var(--dialog-bg-color);color:var(--white-label)}.user-profile-interest{background:var(--last-child);color:#fff}:last-child>.navigation-notification-unit{color:var(--green-label)}.user-profile-menu.user-profile-menu{background:var(--dialog-bg-color);color:var(--yellow-label);border:3px inset;border-color:var(--border-label)}.user-micropost-input-background.user-micropost-input-background{background:var(--dialog-input-bg-color);border:2px inset;border-color:var(--border-label)}.user-micropost-input.user-micropost-input{color:var(--dialog-input-fg-color)}.ui-button-micro.ui-button-micro{background:var(--dialog-button-bg-color);color:var(--white-label)}.ui-button-mega.ui-button-mega{background:var(--dialog-button-bg-color);color:var(--golden-label)}.notification-menu-container-text{color:var(--pink-label)}.notification-menu-container-text span{text-shadow:#000 0 0 3px}.ui-button-mega-icon{color:var(--last-child)}.m1{color:var(--cyan-label)}.m2{color:var(--cyan-label)}.m4{color:var(--cyan-label)}label{color:var(--violet-blue-label)}.user-profile-sub{color:var(--white-label)}.notification-menu-container-text2{color:var(--violet-blue-label)}.ui-button{background:var(--last-child);color:var(--white-label)}.ui-button:hover{background:var(--last-child-light);color:var(--white-label)}.ui-button-text{color:var(--white-label)}.ui-menu-text{color:var(--violet-blue-label)}.ui-button-match-mega{background:var(--last-child);color:var(--white-label)}.ui-button-match-mega:hover{background:var(--last-child-light);color:var(--white-label)}.user-profile-micro-top{background:var(--darkie-label)}.user-profile-micro-button{background:var(--darkie-label)}.label{color:var(--golden-label)}[type=radio]:checked+label:after{background-color:var(--green-aqua-label)}[type=checkbox]:checked+label:before{border-right:2px solid #0eeca0;border-bottom:2px solid #0eeca0}.room-component-message-avatar,html.showGender,.navigation-notification-unit-image,.main-logo,.dashboard-card-image,.user-profile-micro-avatar,.user-profile-avatar,.user-micropost-picture,.user-comment-picture,.user-profile-picture-hover{border-radius:10px}.user-online-icon-profile{margin-left:-27px}#container,.room-component-center,.room-component-messages{background:rgba(37,16,39,.2) !important}body>div>nav{background:rgba(117,0,128,.51) !important}.dashboard-button.animated.zoomIn,.dashboard-button{background:rgba(104,40,100,.44) !important;border:3px inset;border-color:var(--border-label)}.dashboard-button.dashboard-button:hover,.actionicon-mega.actionicon-mega:hover,.navigation-dropdown-content li:hover{background:rgba(8,33,166,.4) !important;border:2px inset}.ui-menu{border:3px inset;border-color:var(--border-label)}.user-profile-info{background:#14001a;border:2px inset;border-color:var(--border-label);height:calc(100% - 120px)}.user-profile-avatar{border:4px inset;border-color:var(--border-label)}.room-component-typing-container{color:#ffc107}.line-scale-pulse-out-rapid>div{background:#ffc107}.line-scale-pulse-out-rapid2>div{background:red}.channel-unit{color:#fff}.channel-unit-active{background:#0932a7;border:2px inset}.channel-unit:hover,.channel-unit-active:hover{color:#0eeca0;border:2px inset}.room-component-input-textarea{background:#14001a !important}.ui-button-match{background:#14001a !important;color:var(--emerald-label);border-radius:50px;margin-left:6px;border-top-right-radius:1 !important;border-bottom-right-radius:1 !important;border:2px inset;border-color:var(--border-label)}.room-component-module,.room-component-left .room-user-label{background:rgba(37,16,39,.6) !important}.room-component-right,.room-component-right-container{background:rgba(37,16,39,.6) !important}.room-component-input{background:#9e1dc1 !important;border:1px inset;border-color:var(--border-label)}.room-component-message-container{border-color:#3fffe5}.side-panel.side-panel,.navigation-dropdown-content li{background:#251027 !important}.ui-button-micro{border-color:var(--golden-label) !important}.ui-button-mega{border-color:var(--golden-label) !important}.ui-interests-bg{border-color:var(--golden-label) !important}.ui-interests-bg.ui-interests-bg{background:var(--input-color-label) !important}.ui-select select,.room-notification.room-notification{background:var(--input-color-label) !important;border-color:var(--golden-label) !important;color:var(--pink-label) !important}.user-micropost-unit{background:var(--input-color-label);border:2px inset;border-color:var(--border-label)}.user-micropost-button,.user-comment-button{color:var(--golden-label)}.user-comment-input.user-comment-input{background:rgba(146,17,157,.44)}.user-micropost-picture{margin:2px 10px -2px 6px}.ui-search-box{border:2px inset;border-color:var(--border-label)}.ui-input{border:2px inset !important;border-color:var(--border-label) !important}.ui-profile-menu{border:2px inset;border-color:var(--border-label)}.notification-button{border:2px inset;border-color:var(--border-label);color:var(--white-label)}.picture-upload-button.picture-upload-button+label{border:2px inset;border-color:var(--golden-label)}.user-profile-pictures-picture-preview{border:2px inset}.user-micropost-date,.room-component-input-icon,.notification-date{color:var(--emerald-label)}.user-profile-pictures-upload-button{background:var(--input-color-label) !important;color:var(--emerald-label) !important}.user-profile-pictures-upload-button:hover{background:var(--blueberry-hover)}.room-component-picture-icon{margin-left:10px}@media screen and (max-width: 640px){.user-profile-info{width:96%}.user-micropost-unit{width:97%}}:root{--app-bg-color: black;--dialog-bg-color: #111;--dialog-overlay-bg-color: rgba(0, 0, 0, 0.93);--dialog-button-bg-color: #17191b;--dialog-button-hover-bg-color: #151515;--dialog-input-bg-color: #17191b;--dashboard-button-bg-color: #100f10;--dashboard-hover-bg-color: #33323270;--header-bg-color: #100f10;--userlist-bg-color: black;--header-bg-color: #100f10;--header-alt-bg-color: #3d4046;--header-hover-bg-color: #3d4046;--input-bg-color: #211f21;--roomlist-bg-color: black;--interests-bg-color: #2c2f35;--chat-bg-color: black;--userlist-bg-color: black;--search-bg-color: #0b0b0b;--upload-button-bg-color: rgb(65, 68, 74);--panel-bg-color: #0c0c0c;--item-hover-bg-color: #35383e;--upload-button-bg-color: #41444a;--menu-bg-color: #0a0a0a;--header-fg-color: #e6fc6d;--header-alt-fg-color: #232529;--panel-fg-color: white;--last-child: #b821bd;--last-child-light: #ee71f2;--emerald-label: #18e281;--violet-blue-label: #8e95f9;--green-label: #b9fc6d;--golden-label: #ffc107;--scarlet-label: #9ddb60;--green-aqua-label: #0eeca0;--golden-light-label: #ffe8a3;--pink-label: #ffb3d1;--dark-violet: #9c3edd;--cyan-label: #3fffe5;--yellow-label: #fefb1f;--darkie-label: #0932a7;--white-label: #e0e0e0;--border-label: #ced9ee;--blueberry-label: rgb(51, 0, 48);--input-color-label: rgb(20, 0, 26);--blueberry-hover: #62034f;--dialog-bg-color: var(--blueberry-label);--input-fg-color: var(--white-label);--dialog-input-bg-color: var(--input-color-label);--dialog-button-bg-color: var(--input-color-label);--dialog-button-hover-bg-color: var(--blueberry-hover);--search-bg-color: var(--input-color-label);--search-fg-color: var(--white-label);--roomlist-title-fg-color: var(--emerald-label);--userlist-title-fg-color: var(--emerald-label);--message-fg-color: var(--green-label);--user-profile-tab-active: var(--green-label);--dialog-button-hover-fg-color: var(--golden-light-label);--upload-button-fg-color: var(--golden-label);--dashboard-icon-fg-color: var(--ritsu-hair-dark-color);--main-logo-text: var(--green-label);--app-fg-color: var(--white-label);--dialog-fg-color: var(--scarlet-label);--dashboard-hover-fg-color: var(--golden-label);--upload-button-bg-color: var(--input-color-label);--ritsu-hair-color: var(--green-label);--ritsu-hair-dark-color: var(--green-label);--ritsu-menu-fg-color: var(--ritsu-hair-color);--ritsu-menu-hover-fg-color: var(--ritsu-hair-color)}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,"body{font:14px Verdana}.user-profile-micro{font-family:Verdana !important}.notification-menu-container-text,.user-micropost-unit{font-family:Verdana}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,"body{font:14px Comic Sans MS}.user-profile-micro{font-family:Comic Sans MS !important}.notification-menu-container-text,.user-micropost-unit{font-family:Comic Sans MS}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,"body{font:14px Helvetica}.user-profile-micro{font-family:Helvetica !important}.notification-menu-container-text,.user-micropost-unit{font-family:Helvetica}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,"body{font:14px Trebuchet MS}.user-profile-micro{font-family:Trebuchet MS !important}.notification-menu-container-text,.user-micropost-unit{font-family:Trebuchet MS}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,"",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,'.lookup-button{border:0;padding:0;background:none;margin-right:.5em;margin-top:-4px}.sort-button{width:20px;height:20px;font-weight:normal;text-transform:none}.sort-button>span{padding:0;margin-top:-4px}.sort-button>div.navigation-dropdown-content{text-align:left;width:180px;top:92px}.sort-button>div.navigation-dropdown-content>div{padding:7px;font-weight:500}.sort-button>div.navigation-dropdown-content>li{display:list-item;list-style:"   "}.sort-button>div.navigation-dropdown-content>li.selected{list-style:"✓"}',""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,'.picture-upload-info{font-size:14px;font-weight:400;color:"#adb6c7"}.picture-upload-info div{margin-bottom:1em}.picture-upload-error{color:red;font-weight:bold}.picture-upload-error-reason{font-weight:initial}.upload-thing{vertical-align:middle;margin-right:5px}',""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".user-profile-bottom{width:100%;height:100%;overflow:clip;max-height:480px}.user-profile-menu{max-height:600px;height:600px;position:relative}.user-comment-input-background{height:75px}.user-comment-input{resize:none;height:75px;line-height:normal}.user-micropost-input{max-height:133px;min-height:35px}.room-component-input-textarea{bottom:0;max-height:133px}.room-component-input{bottom:0;height:auto;max-height:133px;min-height:35px;padding-top:4px;padding-bottom:4px}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,"a.ritsu-message-anchor{text-decoration:underline}.material-icons-inline{font-size:inherit}.material-icons{user-select:none}html.largerText .room-component-message-text{font-size:1.3rem}.bio-image{padding:.3em;margin:.5em;background-color:var(--ritsu-hair-color);color:#000;display:inline-block;user-select:none;border-radius:.3em;font-size:.8em}.bio-expand{color:#00abf3;font-weight:bold;cursor:pointer}",""]),e.exports=n},function(e,t,o){var n=o(1)(!1);n.push([e.i,".mod-approval-pic{max-height:200px;max-width:240px}button{background-color:#3b6a3d;border:none;color:#fff;padding:13px 15px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer;border-radius:10px;box-shadow:0px 0px 10px rgba(0,0,0,.2)}button:hover{background-color:#3e8e41}button:focus,button:active{outline:none;background-color:#3b6a3d}.checkmark-button-container{position:relative;display:inline-block}.checkmark-button{position:absolute;top:10px;left:10px;width:24px;height:24px;border-radius:50%;background-color:transparent;border:2px solid #fff;opacity:.5;transition:all .3s ease;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:1;padding:0%}.checkmark-button.selected{background-color:#007aff;opacity:1}.checkmark-button:hover{opacity:1}.checkmark-button .checkmark{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:16px;height:16px;stroke:#fff;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;fill:none;opacity:0;transition:all .3s ease}.checkmark-button.selected .checkmark{opacity:1}.reason{height:auto !important}",""]),e.exports=n},function(e,t,o){"use strict";o.r(t);var n={};o.r(n),o.d(n,"setPrefix",(function(){return m})),o.d(n,"setLogger",(function(){return f})),o.d(n,"log",(function(){return h})),o.d(n,"info",(function(){return p})),o.d(n,"warning",(function(){return g})),o.d(n,"error",(function(){return b}));var r={};o.r(r),o.d(r,"subscriptable",(function(){return v})),o.d(r,"loggingResponseHandler",(function(){return y})),o.d(r,"noopResponseHandler",(function(){return w}));var i="ritsu-emerald",a="Ritsu x Emerald",s="RxE",c="0.13.3.3",l="https://i.imgur.com/KLtVhho.png";let u="",d=console;function m(e){u=e}function f(e){d=e}function h(e){d.log(u,e)}function p(e){d.info(u,e)}function g(e){d.warn(u,e)}function b(e){d.error(u,e)}function v(e){const t=new Set;return{subscribe:e=>{t.add(e)},unsubscribe:e=>{t.delete(e)},handler:(o,n)=>("set"===o.action&&t.forEach(e=>e(o.preference)),e(o,n))}}function y(e,t){const o=e.response;switch(o.status){case 0:return o;case 1:return"get"===e.action&&(g(`The saved value for preference '${e.preference.key}' (${JSON.stringify(o.saved)}) was invalid. Replacing it with ${JSON.stringify(o.value)}.`),t.set(e.preference,o.value)),"set"===e.action&&g(`Could not set value ${JSON.stringify(o.value)} for preference '${e.preference.key}' because it was invalid.`),o;case 2:return"get"===e.action&&(g(`The saved value for preference '${e.preference.key}' had the wrong type. Replacing it with ${JSON.stringify(o.value)}.`),t.set(e.preference,o.value)),o;case 3:return"get"===e.action&&(g(`The saved value for preference '${e.preference.key}' could not be parsed. Replacing it with ${JSON.stringify(o.value)}.`),t.set(e.preference,o.value)),o;case 4:switch(e.action){case"get":b(`Could not read preference '${e.preference.key}' because localStorage could not be accessed. Using value ${JSON.stringify(e.preference.default)}.`);break;case"set":b(`Could not save value ${JSON.stringify(e.response.value)} for preference '${e.preference.key}' because localStorage could not be accessed.`);break;default:k(e.action)}return o;default:return k(o.status)}}function w(e,t){return e.response}function k(e){throw new Error("assertUnreachable: "+e)}var x="undefined"!=typeof unsafeWindow?unsafeWindow:window;function R(e,t){return void 0===t?e:t}function C(e,t){switch(!0){case Number.isNaN(t):return"NaN";case t===1/0:return"Infinity";case t===-1/0:return"-Infinity";default:return t}}function A(e){return JSON.stringify(e,C)}const M=[function(e){return"boolean"==typeof e},function(e){return"number"==typeof e},N,function(e){return"symbol"==typeof e},E,function(e){return void 0===e}];function N(e){return"string"==typeof e}function E(e){return null===e}function S(e){return M.some(t=>t(e))}function _(e,t,o){return n=`${e.name}(${t.name})`,r=o,Object.defineProperty(r,"name",{value:n,writable:!1});var n,r}function T(e){return S(e)?e=>!1:_(T,e,t=>t instanceof e)}function U(e,t){t.constraints=e.concat(R([],t.constraints))}class j{constructor(e){if(""===e.key)throw new TypeError(`Empty preference key in this ${this.getClassName()}:\n${A(e)}`);this.key=e.key,this.default=e.default,this.label=e.label,this.description=R("",e.description),this.constraints=R([],e.constraints),this.dependencies=R([],e.dependencies),this.extras=R({},e.extras);const t=this.validate(e.default);N(t)&&this.invalidValue(e.default,t)}validate(e){const t=this.constraints;for(let o=0,n=t.length;o<n;o++){const n=t[o];if(!n.requirement(e))return n.message(e)}return{value:e}}toValid(e){return N(this.validate(e))?this.default:e}toString(){return`${this.getClassName()} '${this.key}'`}invalidValue(e,t){throw new Error(`${A(e)} is not a valid value for ${this}. Reason: ${t}`)}}class O extends j{constructor(e){const t=R(0,e.minLength),o=R(1/0,e.maxLength),n=[];if(e.multiline||n.push({requirement:e=>!e.includes("\n"),message:e=>"Line breaks are not allowed."}),t>0&&n.push({requirement:e=>e.length>=t,message:e=>`Minimum length is ${t} characters.`}),o<1/0&&n.push({requirement:e=>e.length<=o,message:e=>`Maximum length ${o} exceeded.`}),U(n,e),super(e),t<0)throw new Error(`Parameter 'minLength' cannot be negative, but it was ${t} in ${this}.`);this.multiline=e.multiline,this.maxLength=o,this.minLength=t}getClassName(){return"StringPreference"}toValid(e){const t=e.substring(0,this.maxLength);return super.toValid(this.multiline?t:t.replace(O.REGEX_LINE_BREAKS," "))}fromString(e){return this.validate(e)}}O.REGEX_LINE_BREAKS=/\n+/g;class P extends j{getClassName(){return"BooleanPreference"}}class I extends j{getClassName(){return"ListPreference"}}class D extends j{constructor(e){const t=e.options;if(U([{requirement:e=>t.some(t=>t.value===e),message:e=>A(e)+" is not among the available options."}],e),super(e),t.length<2)throw new Error(`Parameter 'options' has less than two elements in ${this}.`);const o=[];t.forEach(e=>{const t=this.validate(e.value);if(N(t))throw new Error(`Option value ${A(e.value)} in ${this} is invalid. Reason: ${t}`);if(o.indexOf(e.value)>-1)throw new Error(`Multiple options with value ${A(e.value)} in ${this}.`);o.push(e.value)}),this.options=t}getClassName(){return"MultichoicePreference"}toValid(e){return this.default}}class B extends j{static postParse(e,t){return N(t)?t:e.validate(t.value)}constructor(e){U([{requirement:Number.isFinite,message:e=>e+" is not a finite number."}],e),super(e)}}class G extends B{constructor(e){U([G.CONSTRAINT_INTEGER],e),super(e)}getClassName(){return"IntegerPreference"}static parse(e){const t=parseInt(e,10);return Number.isNaN(t)?`"${e}" is not an integer.`:{value:t}}toValid(e){return super.toValid(Math.round(e))}fromString(e){return B.postParse(this,G.parse(e))}}var F;G.CONSTRAINT_INTEGER={requirement:Number.isInteger,message:e=>e+" is not an integer."},function(e){e.OK="OK",e.ABSENT="ABSENT",e.TYPE_ERROR="TYPE_ERROR",e.JSON_ERROR="JSON_ERROR",e.STORAGE_ERROR="STORAGE_ERROR",e.NUMBER_ERROR="NUMBER_ERROR"}(F||(F={}));const V=()=>localStorage;function z(e,t,o){try{const n=function(e,t,o){if(null===e)throw new DOMException;const n=e.getItem(t);if(E(n))return null;const r=JSON.parse(n);if(function e(t){for(const e of M)if(e(t))return t=>e(t);if(T(Array)(t)){const o=t;return t=>T(Array)(t)&&(!(o.length>0)||t.every(e(o[0])))}if(t.constructor===Object)return o=>![void 0,null].includes(o)&&Object.keys(t).every(n=>e(t[n])(o[n]));if(t.constructor instanceof Function)return T(t.constructor);throw new TypeError(e.name+" cannot use this object as reference because it has no constructor: "+JSON.stringify(t))}(o)(r))return r;throw new TypeError("Saved value had wrong type.")}(e(),t,o);return E(n)?{status:"ABSENT",value:o}:{status:"OK",value:n}}catch(e){return{status:T(SyntaxError)(e)?"JSON_ERROR":T(TypeError)(e)?"TYPE_ERROR":"STORAGE_ERROR",value:o}}}function L(e,t,o){try{return function(e,t,o){const n=JSON.stringify(o,(e,t)=>{if("number"==typeof t&&!Number.isFinite(t))throw new RangeError(t.toString());return t});if(null===e)throw new DOMException;e.setItem(t,n)}(e(),t,o),{status:"OK",value:o}}catch(e){return{status:T(RangeError)(e)?"NUMBER_ERROR":T(SyntaxError)(e)||T(TypeError)(e)?"JSON_ERROR":"STORAGE_ERROR",value:o}}}function H(e,t){try{return e().removeItem(t),{status:"OK",value:!0}}catch(e){return{status:"STORAGE_ERROR",value:!1}}}var K;!function(e){e[e.OK=0]="OK",e[e.INVALID_VALUE=1]="INVALID_VALUE",e[e.TYPE_ERROR=2]="TYPE_ERROR",e[e.JSON_ERROR=3]="JSON_ERROR",e[e.STORAGE_ERROR=4]="STORAGE_ERROR"}(K||(K={}));const q=(e,t)=>e.response;function J(e){return`Unknown preference:\n\n${A(e)}.`}function W(e){switch(e){case"OK":case"ABSENT":return 0;case"NUMBER_ERROR":return 1;case"TYPE_ERROR":return 2;case"JSON_ERROR":return 3;case"STORAGE_ERROR":return 4}}var Y=Object.assign(Object.assign(Object.assign(Object.assign({title:`${a} ${c}`,themeTitle:"Choose your theme",fontTitle:"Choose your font"},!1),{generalTitle:"General Settings",imagesTitle:"Image Settings",messageTitle:"Message Settings",mutelistTitle:"Permanent Mutes",advancedTitle:"Advanced Settings",preferences:Object.assign(Object.assign({theme:{label:"Theme",description:"Reskin the chat"},font:{label:"Font",description:"Change the font"}},!1),{adBlocker:{label:"Remove ads and nags"},fancyColors:{label:"Choose your own flair color"},imgControl:{label:"Block and favorite images"},legacyImages:{label:"Use legacy image sending (for emerald gold users)"},imgProtect:{label:"Hide images from low karma accounts"},imgBlur:{label:"Blur user images"},hidePfp:{label:"Hide profile pictures in chat"},showInfo:{label:"Show extra user info"},antiSpam:{label:"Mute spammers automatically"},showGender:{label:"Show gender on profile pictures"},trackKarma:{label:"Show live karma & flash changes"},mutelist:{label:"Perma mute list"},userSort:{label:"Sort users by..","name.asc":"Name Asc.","name.desc":"Name Desc.","age.asc":"Account age Asc.","age.desc":"Account age Desc."},blockReqs:{label:"Block friend requests from new accounts"},highlightMentions:{label:"Highlight your name when you're mentioned"},altpfpBackground:{label:"Choose the background colour for transparent pictures"},bigEmoji:{label:"Jumbo-sized emoji"},hideImageFallback:{label:"Hide your images from non-RxE users"},ignoreURLBlacklist:{label:"Ignore URL blacklist"},imgurAPIKey:{placeholder:"Imgur API Key",label:"Leave blank for default"},muteRegexes:{label:"Mute users matching"},toggleEmbeds:{label:"Show embeds"},largerText:{label:"Increase text size"},showAnimatedImages:{label:"Show GIFs"},notifyUpdates:{label:"Notify when updates are available"},hideFromGc:{label:"Hide yourself from side-list in group chat (mods only)"},hideTyping:{label:"Hide your typing status in chat"}}),hiddenChannels:"hidden channels",WFAF:"WFAF ⌛",privateRooms:"Private Rooms 🔒",privateRoomsPrompt:"Enter a private room key:\nOnly people with the key can enter this room.",privateRoomsWarning:"Chat history and user list is not available in unlisted rooms."}),!1),{introduction:{title:"Welcome to RxE.",content:"How do you want to use Emerald?",presetsTitle:"Choose your preset",presets:{safe:{title:"Safe",content:"Block requests from new accounts. Images from low karma accounts are hidden, all others blurred. GIFs and embeds are not shown."},normal:{title:"Normal",content:"Anyone can add you. Images from low karma accounts are hidden. GIFs and embeds are shown."},unsafe:{title:"Wild West",content:"Anyone can add you. No restrictions on images or profile pictures."}}}});const Q=null;var Z;!function(e){e[e.None=0]="None",e[e.Hide=1]="Hide",e[e.Reject=2]="Reject"}(Z||(Z={}));const X={theme:new O({key:"theme",label:Y.preferences.theme.label,description:Y.preferences.theme.description,default:"ritsu",multiline:!1}),font:new O({key:"font",label:Y.preferences.font.label,description:Y.preferences.font.description,default:"default",multiline:!1}),adBlocker:new P({key:"adBlocker",label:Y.preferences.adBlocker.label,default:!0}),fancyColors:new P({key:"fancyColors",label:Y.preferences.fancyColors.label,default:!0}),imgControl:new P({key:"imgControl",label:Y.preferences.imgControl.label,default:!0}),imgProtect:new P({key:"imgProtect",label:Y.preferences.imgProtect.label,default:!0}),legacyImages:new P({key:"legacyImages",label:Y.preferences.legacyImages.label,default:!0}),imgBlur:new P({key:"imgBlur",label:Y.preferences.imgBlur.label,default:!1}),hidePfp:new P({key:"hidePfP",label:Y.preferences.hidePfp.label,default:!1}),showInfo:new P({key:"showInfo",label:Y.preferences.showInfo.label,default:!0}),antiSpam:new P({key:"antiSpam",label:Y.preferences.antiSpam.label,default:!0}),permaMuteList:new I({key:"permaMuteList",label:Y.preferences.mutelist.label,default:[]}),showGender:new P({key:"showGender",label:Y.preferences.showGender.label,default:!0}),trackKarma:new P({key:"trackKarma",label:Y.preferences.trackKarma.label,default:!0}),notifyUpdates:new P({key:"notifyUpdates",label:Y.preferences.notifyUpdates.label,default:!0}),hideTyping:new P({key:"hideTyping",label:Y.preferences.hideTyping.label,default:!1}),hideFromGc:new P({key:"hideFromGc",label:Y.preferences.hideFromGc.label,default:!1}),blockedHashes:new I({key:"blockedHashes",label:"blockedHashes",default:[]}),savedPictures:new I({key:"savedPictures",label:"savedPictures",default:[]}),userSort:new O({key:"userSort",label:Y.preferences.userSort.label,default:"name.asc",multiline:!1}),blockReqs:new D({key:"blockReqs",label:Y.preferences.blockReqs.label,default:0,options:[{value:Z.None,label:"Off"},{value:Z.Hide,label:"Hide"},{value:Z.Reject,label:"Reject"}]}),highlightMentions:new P({key:"highlightMentions",label:Y.preferences.highlightMentions.label,default:!0}),altpfpBackground:new O({key:"altpfpBackground",label:Y.preferences.altpfpBackground.label,default:"#fff",multiline:!1}),bigEmoji:new P({key:"bigEmoji",label:Y.preferences.bigEmoji.label,default:!0}),toggleEmbeds:new P({key:"toggleEmbeds",label:Y.preferences.toggleEmbeds.label,default:!0}),largerText:new P({key:"largerText",label:Y.preferences.largerText.label,default:!1}),imgurLastUploadTimes:new I({key:"imgurLastUploadTimes",label:"imgurLastUploadTimes",default:[]}),imgurPfpAlbum:new I({key:"imgurPfpAlbum",label:"imgurPfpAlbum",default:[]}),hideImageFallback:new P({key:"hideImageFallback",label:Y.preferences.hideImageFallback.label,default:!1}),imgurDeleteHashes:new I({key:"imgurDeleteHashes",label:"imgurDeleteHashes",default:[]}),picModHashes:new I({key:"picModHashes",label:"picModHashes",default:[]}),nameModRecords:new I({key:"nameModRecords",label:"nameModRecords",default:[]}),ignoreURLBlacklist:new P({key:"ignoreURLBlacklist",label:Y.preferences.ignoreURLBlacklist.label,default:!1}),imgurAPIKey:new O({key:"imgurAPIKey",label:Y.preferences.imgurAPIKey.label,default:"",multiline:!1}),muteRegexes:new I({key:"muteRegexes",label:Y.preferences.muteRegexes.label,default:[]}),showAnimatedImages:new P({key:"showAnimatedImages",label:Y.preferences.showAnimatedImages.label,default:!0}),introductionCompletedVersion:new G({key:"introductionCompletedVersion",label:"introductionCompletedVersion",default:0})},ee=Object.assign(Object.assign({},X),Q),te=new class{constructor(e,t,o=q){this.localStoragePrefix=t,this.responseHandler=o,this.cache=new Map;const n=[],r=function e(t){return Object.values(t).reduce((t,o)=>t.concat(T(j)(o)?o:e(o.h)),[])}(e);r.forEach(e=>{const t=e.key;if(n.includes(t))throw new Error(`Duplicate preference key ${A(t)}.`);this.cache.set(e,e.default),n.push(t)}),r.forEach(e=>{e.dependencies.forEach(t=>{if(void 0===this.cache.get(t.preference))throw new Error(`Dependency error in ${e}: ${J(t.preference)}`)})})}get(e){return this.getWith(this.responseHandler,e)}set(e,t){this.setWith(this.responseHandler,e,t)}getWith(e,t){return e({action:"get",preference:t,response:this.getRaw(t)},this).value}setWith(e,t,o){e({action:"set",preference:t,response:this.setRaw(t,o)},this)}reset(e){var t;this.getFromCacheOrThrowIfUnknown(e),t=this.localStoragePrefix+e.key,H(V,t)}resetAll(){for(const e of this.cache.keys())this.reset(e)}shouldBeAvailable(e){return e.dependencies.every(e=>e.condition(this.getRaw(e.preference).value))}getRaw(e){const t=this.getFromCacheOrThrowIfUnknown(e),o=(n=this.localStoragePrefix+e.key,r=e.default,z(V,n,r));var n,r;if("OK"===o.status){const t=o.value;return N(e.validate(t))?{status:1,value:e.toValid(t),saved:t}:{status:0,value:t}}return{status:W(o.status),value:t}}setRaw(e,t){if(this.getFromCacheOrThrowIfUnknown(e),N(e.validate(t)))return{status:1,value:t};this.cache.set(e,t);const o=function(e,t){return L(V,e,t)}(this.localStoragePrefix+e.key,t);return{status:W(o.status),value:o.value}}getFromCacheOrThrowIfUnknown(e){const t=this.cache.get(e);if(void 0===t)throw new Error(J(e));return t}}(ee,i+"-preference-",r.loggingResponseHandler);var oe=o(0),ne=o.n(oe),re=o(7);const{max:ie,min:ae}=Math,se=(e,t={})=>Object.assign(document.createElement(e),t),ce=[];function le(e){ce.push(e),Promise.resolve().then(()=>{if(!ce.length)return;const e=ce.join("\n");ce.length=0,document.head.append(se("style",{type:"text/css",textContent:e}))})}function ue(e,t,o,n=!1){const r=e[t];e[t]=function(...e){const t=n&&o.apply(this,e);let i=null;return n&&!1===t||(i=r.apply(this,e)),n||o.apply(this,e),i}}let de;function me(e){clearTimeout(de),Promise.resolve().then(()=>null===RoomClient||void 0===RoomClient?void 0:RoomClient.print_append(ne.a.createElement("div",null,e)))}function fe(e){me(e),document.body.classList.add("tmp-message"),de=+setTimeout(()=>{null===RoomClient||void 0===RoomClient||RoomClient.print_append(),document.body.classList.remove("tmp-message")},5e3)}const he=(e=0)=>new Promise(t=>setTimeout(t,e));var pe;function ge(e){return(t,o)=>e(o,t)}!function(e){e.string=(e,t)=>e.localeCompare(t),e.numeric=(e,t)=>e-t}(pe||(pe={}));function be(e,t,o,n,r=!1){return function(e,t,o,n=!1){const r=n?e:Array.from(e),i="asc"===o?t:ge(t);return r.sort(i),r}(e,(i=t,a=o,(e,t)=>a(e[i],t[i])),n,r);var i,a}const ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ye=Array.from({length:65},(e,t)=>String.fromCodePoint(t+917536)).join("");function we(e){const t=btoa(e);let o="";for(let e=0;e<t.length;e+=1){const n=ve.indexOf(t[e]);if(-1===n)return null;o+=ye[2*n]+ye[2*n+1]}return o}function ke(e){return null==e?[]:e.filter(e=>null!=e)}function xe(e){return+new Date-+new Date(e)}function Re(e,t,o){let n=!1;return e.flatMap(e=>{n=!n;const r=n?t(e):o(e);return null===r?[]:r instanceof Array?r:[r]})}function Ce(e,t,o){if(0===t.length)return[e];const n=t.flatMap(e=>{if("number"==typeof e){if(void 0===o)throw new Error("Length must not be undefined if matches is of type number[]");return[e,e+o]}const[t,n]=e;return[t,t+n]});n.push(void 0);return n.map((t,o,{[o-1]:n})=>e.slice(null!=n?n:0,t))}function Ae(e,t,o,n){const r=Array.from(e.matchAll(t)).map(e=>{if(void 0===e.index)throw new Error("So TypeScript really was right about match.index");return[e.index,e[0].length]});return Re(Ce(e,r),n,o)}function Me(e,t,o,n,r=!1){const i=function(e,t,o=!1){let n=o?e:e.toLowerCase();const r=o?t:t.toLowerCase(),i=[];let a=0;for(;n.length>0;){if(a=n.indexOf(r),-1===a)return i;i.push(a+e.length-n.length),n=n.slice(a+Math.max(r.length,1))}return i}(e,t,r);return Re(Ce(e,i,Math.max(t.length,1)),n,o)}function Ne(e){const t=Math.abs(e)>=1e3?(e/1e3).toPrecision(3)+"K":""+e;return e>=0?"+"+t:""+t}const Ee=e=>e?e.replace(/[\u061C\u200E-\u200F\u202A-\u202E\u2066-\u2069]/g,""):e;function Se(e,t=""){const o=e.split(t).sort(),n=o.length;return o.filter((e,t,o)=>e!==o[t-1]).map(e=>o.reduce((t,o)=>o===e?t+1:t,0)).map(e=>e/n).reduce((e,t)=>e+-t*Math.log2(t),0)}function _e(e){const t=(e+e).indexOf(e,1);return t>-1&&t!==e.length?e.length/t:0}const Te={allowSpace:!1,otherKeysPreventDefault:!1,otherKeysStopPropagation:!1};function Ue(e,{allowSpace:t,otherKeysStopPropagation:o,otherKeysPreventDefault:n}=Te){return{onClick:e,onKeyUp:r=>{"Enter"===r.key||t&&""===r.key?e(r):(o&&r.stopPropagation(),n&&r.preventDefault())}}}function je(...e){if(0===e.length)throw new Error("Must supply at least one RegExp");const t=e[e.length-1],o="string"==typeof t,n=e.slice(0,o?-1:0),r="string"==typeof t?t:t.flags;return new RegExp(n.map(e=>"string"==typeof e?e:e.source).join(""),r)}Error;function $e(e){if("number"!=typeof e)return e}function Oe(e){return null===e?NaN:"number"==typeof e?e:e.id}function Pe(e){return Array.isArray(e)?e:[e]}var Ie=o(8),De=o.n(Ie);const Be=["captcha","youtube","about:blank","open.spotify.com","i.redd.it","ibb.co","challenges.cloudflare.com"];function Ge(){if(!te.get(X.adBlocker))return;Array.from(document.querySelectorAll("iframe")).forEach(e=>{const{src:t}=e;t&&!Be.some(e=>t.includes(e))&&e.remove()})}o(9);function Fe(e){const t=e instanceof Array?e.join(""):e;return{message:t,uppercase:t.split("").filter(e=>e.toLowerCase()!==e),entropySplit:Se(t,/\s+/),entropy:Se(t),repeating:_e(t),noLowerCase:t.toUpperCase()===t}}function Ve(e){var t,o,n;const r=null===(t=$e(e))||void 0===t?void 0:t.created_at;return{accountCreated:r?new Date(r):new Date,id:Oe(e),displayName:null!==(n=null===(o=$e(e))||void 0===o?void 0:o.display_name)&&void 0!==n?n:""}}var ze,Le;(Le=ze||(ze={})).legacy=function(e,{messages:t}){const o=Date.now(),{message:n,uppercase:r}=Fe(t);e.scoreLegacy+=(1e3/(xe(e.lastMessageTime)||o))**.2,e.scoreLegacy/=Math.max(1/Math.E,Math.E-Math.log(10+n.length+r.length)/4)},Le.strikeBased=function(e,t){const{max:o,log10:n}=Math,r=Date.now(),{accountCreated:i}=Ve(t.user),{message:a,entropySplit:s,noLowerCase:c,repeating:l}=Fe(t.messages),u=r-e.lastMessageTime||1500;if(u<=1e3?e.scoreStrikes+=1:u>2e3&&(e.scoreStrikes=o(0,e.scoreStrikes-n(u))),xe(i)<6e5){const t=a.length>200;(s<2||l>3)&&t&&(e.scoreStrikes+=1),e.scoreStrikes*=c?3:2}},Le.experimental=function(e,t){const{max:o,abs:n}=Math,{accountCreated:r}=Ve(t.user),i=Fe(t.messages),{entropy:a,uppercase:s}=i,c=i.message.trim(),{length:l}=c,u=l?l**-.2:1,d=l?l/o(s.length+l-3,l):1,m=.75*(xe(r||new Date)/864e5)**.1,f=a*d*u*m,h=(f+function(e){const{message:t}=Fe(e),o=t.toLowerCase(),r=Se(o)-Se(o+c);return n(r)}(e.lastMessage)*f)/2,p=o(xe(e.lastMessageTime||r||new Date),500);e.scoreExperimental/=p/2e3,e.scoreExperimental+=1-h,e.scoreExperimental=o(0,e.scoreExperimental)};const He=[19364487,19422865,11427049,16008266,21550262,21541886,14267520],Ke={},qe={};function Je(e){var t;const{messages:o,user:n}=e;if(void 0===o)return;const r=Oe(n),i=Date.now();Ke[r]=null!==(t=Ke[r])&&void 0!==t?t:{scoreLegacy:1,scoreStrikes:0,scoreExperimental:1,lastMessageTime:0,lastMessage:""};const a=Ke[r];ze.legacy(a,e),ze.strikeBased(a,e),ze.experimental(a,e),a.lastMessageTime=i,a.lastMessage=o.join(""),function(e,t){const{id:o,displayName:n}=Ve(t),{room:r}=App,i=e.scoreStrikes,a=He.includes(o),s=r.muted.includes(o),c=!a&&i>=3&&!s&&te.get(X.antiSpam),l=i<1&&s&&qe[o];if(c){if(o===App.user.id)return fe("AutoMute: You would have gotten muted"),void console.log("User would be muted here");qe[o]=!0,r.mute(o,n,"spam"),fe(`AutoMute: Muted user ${n}.`)}l&&(delete qe[o],r.unmute(o),fe(`AutoMute: Unmuted user ${n}.`))}(a,n)}function We(e){const t=Oe(e);delete Ke[t]}function Ye(e){if(null==(null===RoomClient||void 0===RoomClient?void 0:RoomClient.state.id)||"private"===(null===RoomClient||void 0===RoomClient?void 0:RoomClient.state.mode))return;const{user:t}=e;"number"!=typeof t&&(t.display_name=Ee(t.display_name)),function({user:e,user_disconnected:t}){if(!("state"in RoomChannelMembersClient)||"number"==typeof e)return;if(t)return void fe(`User ${e.display_name} left the chat.`);const o=Oe(e),{members:n}=RoomChannelMembersClient.state;n.map(Oe).includes(o)||fe(`User ${e.display_name} joined the chat.`),RoomChannelMembersClient.add_member(e)}(e),Je(e)}var Qe=o(10),Ze=o.n(Qe);function Xe(){["room-component-message-picture","message-image","navigation-notification-unit-image"].forEach(e=>{document.querySelectorAll("."+e).forEach(e=>{e.src.includes("robohash")||e.classList.contains("ritsu-would-blur")||e.classList.add("ritsu-would-blur")})})}const et=e=>`\n\t · ${JSON.stringify(e)} (U+${e.charCodeAt(0).toString(16).padStart(4,"0").toUpperCase()})`;function tt(e){return e.replace(/(\S)\.([a-z][a-z])/gi,"$1%2E$2").replace(/https?:\/\//gi,"")}const ot=e=>e.replace(/%2E/gi,".").replace(/\s?\(\s?(\.|dot)\s?\)\s?/g,".").replace(/\.\u200b/g,"."),nt=je("(?:",["%2E","dot",/\./.source,/ ?\( ?(?:\.|dot) ?\) ?/.source].join("|"),")","").source,rt=/(https?:\/\/)?/.source,it=/[-a-z0-9@:%_+[\]~#?&=]/.source,at=()=>je(...[/\bi\.ibb\.co\/[a-z0-9]+\/[^\s.]+\.[a-z0-9]+\b/gi,/\bi\.redd\.it\/[a-z0-9]+\.[a-z0-9]+\b/gi,/\bi\.imgur\.com\/[a-z0-9]+\.[a-z0-9]+\b/gi].map(e=>`(${e.source})`).join("|"),"gi"),st={},ct="https://emeraldchat.com/avicons_strict/1.png";var lt;function ut(e){e.onerror||(e.onerror=async()=>{switch(function(e){return(e=>e.classList.contains("message-image"))(e)?lt.NoFallbackAvailable:e.src.startsWith("data:image")?lt.AviconFallback:e.src.includes("/avicons_strict/")||(e=>e.includes("emeraldchat.com/"))(e.src)?lt.NoFallbackAvailable:lt.RobohashFallback}(e)){case lt.RobohashFallback:e.src=`https://robohash.org/yay${e.src}.png?set=set4`;break;case lt.AviconFallback:e.src=ct}})}function dt(e,t){return!0===st[e.src]?(t&&(e.src=t),!1):!1===st[e.src]&&(e.src=ct,!0)}function mt(e){if(e.classList.contains("zoomIn"))return;if(!at().test(e.src))return;const{src:t}=e;dt(e)||async function(e){const t=await fetch(e),o=await t.arrayBuffer(),n=new Uint8Array(o.slice(0,4)),r=Array.from(n).map(e=>e.toString(16)).join("");if(r.startsWith("424d"))return"image/bmp";switch(r){case"89504e47":return"image/png";case"47494638":return"image/gif";case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"25504446":return"application/pdf";default:return}}(t).then(o=>{st[t]="image/gif"!==o,dt(e,t)})}function ft(){Array.from(document.images).forEach(e=>{var t;ut(e),e.complete&&0===e.naturalHeight&&(null===(t=e.onerror)||void 0===t||t.call(e,"")),te.get(X.showAnimatedImages)||mt(e)})}function ht(){var e,t;if(!te.get(X.fancyColors))return;const o=document.querySelector('label.ui-select[for="flair-select"]');if(!o||"flair-select"!==(null===(e=o.firstElementChild)||void 0===e?void 0:e.id))return;o.htmlFor="flair-select-old";const n=new Event("change",{bubbles:!0}),r=o.cloneNode();r.classList.add("disable-after"),o.firstElementChild.id="flair-select-old",o.style.display="none";const i=se("input",{id:"flair-select",className:"alt-flair-select",value:App.user.flair.color}),a=se("input",{id:"flair-select",type:"color",className:"picker-flair-select",value:App.user.flair.color,oninput:()=>{var e;i.value=a.value,null===(e=o.firstChild)||void 0===e||e.dispatchEvent(n)}});r.append(i,a),null===(t=o.parentElement)||void 0===t||t.insertBefore(r,o.nextSibling),i.oninput=()=>{var e;a.value=i.value,null===(e=o.firstChild)||void 0===e||e.dispatchEvent(n)}}!function(e){e[e.RobohashFallback=0]="RobohashFallback",e[e.AviconFallback=1]="AviconFallback",e[e.NoFallbackAvailable=2]="NoFallbackAvailable"}(lt||(lt={}));var pt=o(11),gt=o.n(pt);function bt(e){var t;let o,n=e.apply(this);if(!this.props.data)return n;if((null===(t=this.props.data.data)||void 0===t?void 0:t.sender)&&(o=this.props.data.data.sender.gender),this.props.data.gender&&(o=this.props.data.gender),n.props.children){const{children:e}=n.props;e[0].props["data-gender"]=o;const t=n.props;t.children=e,n=ne.a.cloneElement(n,t)}return n=ne.a.cloneElement(n,{"data-gender":o}),n}var vt=o(12),yt=o.n(vt);function wt(e){const{isSelected:t,onClick:o}=e,n=ne.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",style:{fill:"#fff"}},ne.a.createElement("path",{d:"M6 11.776l-3.88-3.888-1.12 1.152 5 5 10-10-1.12-1.152-8.88 8.888z"}));return ne.a.createElement("button",{className:`checkmark-button${t?" selected":""} `,onClick:o,type:"button"},t&&n)}function kt(e,t){return e>=2&&t>=2?"conflicted":e>=2?"approve":t>=2?"reject":"standby"}async function xt(e){const t=await fetch("/profile_json?id="+e);return await t.json()}function Rt(e){const t=document.querySelector(".notification-count-overlay");t&&(t.textContent=String(e)),t.style.display=e>0?"inline":"none"}function Ct(e,t){const o=te.get(X.picModHashes),n=o.find(t=>t.hash===e);if(n)"approve"===t?n.approvals+=1:"reject"===t&&(n.rejections+=1),te.set(X.picModHashes,o);else{const n={hash:e,approvals:"approve"===t?1:0,rejections:"reject"===t?1:0},r=[...o,n];te.set(X.picModHashes,r)}}async function At(e,t,o){const n=te.get(X.picModHashes);(await Promise.allSettled(e.map(async({id:e,image_url:t})=>{try{const n=await async function(e){return(await fetch(e)).blob()}(t),r=await new Promise((e,t)=>{const o=new FileReader;o.readAsDataURL(n),o.onload=()=>e(o.result),o.onerror=e=>t(e)});return{id:e,imageHash:await(o=n,new Promise((e,t)=>{const n=new FileReader;n.readAsDataURL(o),n.onload=()=>{const t=n.result,o=re.a.calculate(t);console.log("hash",o),e(o)},n.onerror=e=>{t(e)}})),base64Image:r}}catch(t){return console.error(`Error hashing image ${e}: ${t}`),{id:e,error:t}}var o})).then(e=>e.filter(({status:e})=>"fulfilled"===e).map(({value:e})=>e))).forEach(({id:t,imageHash:o,base64Image:n})=>{const r=e.find(({id:e})=>e===t);r&&(r.imageHash=o,r.base64Image=n)});const r=e.filter(({imageHash:e})=>n.some(({hash:t})=>t===e)).map(({id:e,imageHash:t})=>{const{approvals:o=0,rejections:r=0}=n.find(({hash:e})=>e===t)||{};return{id:e,action:kt(o,r),hash:t}}),i=[],a=[],s=[];r.forEach(({id:e,action:t,hash:o})=>{o&&("conflicted"===t?i.push(o):"approve"===t?(a.push(e),Ct(o,"approve")):"reject"===t&&(s.push(e),Ct(o,"reject")))}),a.forEach(e=>t(e)),s.forEach(e=>o(e)),function(e){const t=te.get(X.picModHashes).filter(t=>!e.includes(t.hash));te.set(X.picModHashes,t)}(i);return e.filter(e=>!a.includes(e.id)&&!s.includes(e.id)&&!i.includes(e.imageHash?e.imageHash:""))}function Mt(){te.set(X.picModHashes,[]),alert("Image cache for picture moderation has been cleared")}function Nt(e){const t=document.querySelector(".name-count-overlay");t&&(t.textContent=String(e)),t.style.display=e>0?"inline":"none"}function Et(e,t){const o=te.get(X.nameModRecords),n=o.find(t=>t.name===e);if(n)"approve"===t?n.approvals+=1:"reject"===t&&(n.rejections+=1),te.set(X.nameModRecords,o);else{const n={name:e,approvals:"approve"===t?1:0,rejections:"reject"===t?1:0},r=[...o,n];te.set(X.nameModRecords,r)}}async function St(e,t,o){const n=te.get(X.nameModRecords),r=e.filter(({new_display_name:e})=>n.some(({name:t})=>t===e)).map(({id:e,new_display_name:t})=>{const{approvals:o=0,rejections:r=0}=n.find(({name:e})=>e===t)||{};return{id:e,action:kt(o,r),name:t}}),i=[],a=[],s=[];r.forEach(({id:e,action:t,name:o})=>{o&&("conflicted"===t?i.push(o):"approve"===t?(a.push(e),Et(o,"approve")):"reject"===t&&(s.push(e),Et(o,"reject")))}),a.forEach(e=>t(e)),s.forEach(e=>o(e)),function(e){const t=te.get(X.nameModRecords).filter(t=>!e.includes(t.name));te.set(X.nameModRecords,t)}(i);return e.filter(e=>!a.includes(e.id)&&!s.includes(e.id)&&!i.includes(e.new_display_name))}function _t(){te.set(X.nameModRecords,[]),alert("Cache for display name moderation has been cleared")}function Tt(e){$.ajax({type:"POST",url:`/picture_moderations/${e}/approve`,dataType:"json"})}function Ut(e){$.ajax({type:"DELETE",url:"/picture_moderations/"+e,dataType:"json"})}function jt(e){$.ajax({type:"POST",url:`/display_name_moderations/${e}/approve`,dataType:"json"})}function $t(e){$.ajax({type:"DELETE",url:"/display_name_moderations/"+e,dataType:"json"})}function Ot(){const e=document.querySelector(".navigation-notification-icons"),t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);if(null==e?void 0:e.children){if(document.fullscreenEnabled&&!e.querySelector(".ritsu-button-fullscreen")&&!t){const t=se("span",{className:"material-icons navigation-notification-unit ritsu-button-fullscreen",textContent:"open_in_full",tabIndex:-1,role:"button",onmousedown:async()=>{document.fullscreenElement?(document.exitFullscreen(),t.textContent="open_in_full"):(await document.body.requestFullscreen(),t.textContent="close_fullscreen")}}),o=se("span");o.append(t),e.prepend(o)}if(!e.querySelector(".ritsu-icon-network-unavail")){const t="Emerald is not responding - switching chats is not recommended.",o=se("span",{className:"material-icons navigation-notification-unit ritsu-icon-network-unavail",textContent:"signal_cellular_alt",tabIndex:-1,role:"button",title:t,onmousedown:()=>alert(t)}),n=se("span");n.append(o),e.prepend(n)}if(!e.querySelector(".ritsu-icon-pic-mod")&&App.user.mod){const t=se("span",{className:"notification-count-overlay",textContent:0,style:"display: none;"}),o=se("span",{className:"material-icons navigation-notification-unit ritsu-icon-pic-mod",textContent:"account_box",tabIndex:-1,role:"button",title:"Picture Moderation",onmousedown:()=>ActionTray.prototype.pictureModeration()}),n=se("span");n.append(o),n.append(t),e.prepend(n)}if(!e.querySelector(".ritsu-icon-name-mod")&&App.user.mod){const t=se("span",{className:"name-count-overlay",textContent:0,style:"display: none;"}),o=se("span",{className:"material-icons navigation-notification-unit ritsu-icon-name-mod",textContent:"badge",tabIndex:-1,role:"button",title:"Display Name Moderation",onmousedown:()=>ActionTray.prototype.display_nameModeration()}),n=se("span");n.append(o),n.append(t),e.prepend(n)}document.body.classList.contains("watchers_started")||(o(),n(),document.body.classList.add("watchers_started"),setInterval(o,15e3),setInterval(n,15e3))}async function o(){if(document.body.classList.contains("picModMounted"))return;Rt(await async function(){if(!App.user.mod)return 0;const e=await fetch("/picture_moderations");if(403===e.status)return 0;const t=await e.json(),o=await At(t,Tt,Ut);return o.length?o.length:0}())}async function n(){if(document.body.classList.contains("picModMounted"))return;Nt(await async function(){if(!App.user.mod)return 0;const e=await fetch("/display_name_moderations");if(403===e.status)return 0;const t=await e.json(),o=await St(t,jt,$t);return o.length?o.length:0}())}}function Pt(){const e=document.querySelector(".main-logo");e&&(Ot(),function(e){const t=App.user.display_picture;e instanceof HTMLImageElement&&e.src!==t&&(e.src=t)}(e),function(){if(document.head.querySelector(`link[rel="icon"][href="${l}"]`))return;document.head.querySelectorAll('link[rel="icon"]').forEach(e=>e.remove());const e=se("link",{rel:"icon",href:l});document.head.prepend(e)}(),function(e){var t;if(document.querySelector(".karma-tracker"))return;const o=se("div",{className:"karma-tracker"});null===(t=null==e?void 0:e.parentElement)||void 0===t||t.insertBefore(o,null==e?void 0:e.nextSibling)}(e),function(e){const t=`${App.user.display_name||"(...)"} - ${s} ${c}`;document.title!==t&&(document.title=t);const o=document.querySelector(".main-logo-text");if(!o){const o=se("div",{className:"main-logo-text",textContent:t});e.parentElement&&e.parentElement.insertBefore(o,e.nextSibling)}o&&o.textContent!==t&&(o.textContent=t)}(e))}var It=o(13),Dt=o.n(It);let Bt=null;function Gt(e){500===e.status&&(App.room&&App.room.leave(App.room.id),x.location.href="/")}function Ft(e){const t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);if(e===Bt)return;null!==Bt&&function(e){const t=se("div",{className:"karma-delta "+(e>0?"positive":"negative"),textContent:Ne(e)});document.body.append(t),setTimeout(()=>t.classList.add("zoom"),250),setTimeout(()=>t.remove(),5e3)}(e-Bt),Bt=e;const o=document.querySelector(".karma-tracker");o&&(t||(o.textContent=e?"Karma: "+e:""))}function Vt(){const{id:e}=App.user;e?$.ajax({type:"GET",url:"/profile_json?id="+e,dataType:"json",success:e=>Ft(e.user.karma),error:e=>Gt(e)}):setTimeout(Vt,500)}function zt(){const e=RoomChannelMembers.prototype.setState;RoomChannelMembers.prototype.setState=function(t){t&&"members"in t&&function(e,t){const o=ke(e);ke(t).forEach(e=>{!function(e,t){t.delta=e?t.karma-e.karma:0}(o.find(({id:t})=>t===e.id),e)})}(this.state.members,t.members),e.call(this,t)};const t=UserUnit.prototype.body;UserUnit.prototype.body=function(){const e=t.call(this),o=this.props.data;return o.delta<0&&(e.props.className+=" down"),o.delta>0&&(e.props.className+=" up"),e}}function Lt(e){var t,o,n;if(!(null===(n=null===(o=null===(t=App.room)||void 0===t?void 0:t.id)||void 0===o?void 0:o.startsWith)||void 0===n?void 0:n.call(o,"channel")))return!1;if(!(RoomChannelMembersClient instanceof ne.a.Component))return!1;const r=+App.room.id.slice(7),i=e.find(({channel:e})=>e.id===r);if(!i)return!1;const a=ke(RoomChannelMembersClient.state.members);ke(i.members).forEach(e=>{const t=a.findIndex(({id:t})=>t===e.id);t>-1?a[t]=e:a.push(e)});const s=function(e){const t=RoomChannelMembersClient.state.members_persistent||[],o=e.filter(e=>!t.find(t=>(null==t?void 0:t.id)===e.id)),n=[...t,...o];return n.length>100&&n.splice(0,n.length-100),n}(a);RoomChannelMembersClient.setState({members:a,members_persistent:s});const c=i.members.find(e=>(null==e?void 0:e.id)===App.user.id);return!!c&&(Ft(c.karma),!0)}function Ht(e){const t=(o=e.text_channels,RoomChannelSelectClient.state.text_channels.map(e=>{const t=o.find(({channel:t})=>t.id===e.channel.id);if(!t)return e;const{members:n}=t;return Object.assign(Object.assign({},e),{members:n})}));var o;RoomChannelSelectClient.setState({text_channels:t});Lt(t)||Vt()}function Kt(){const{id:e}=App.user;e?(setTimeout(Kt,6e4),RoomChannelMembersClient instanceof ne.a.Component&&$.ajax({type:"GET",url:"channels_default",dataType:"json",success:Ht,error:Gt})):setTimeout(Kt,500)}const qt=/^(?:spotify:|https:\/\/[a-z]+\.spotify\.com\/(track\/|user\/(.*)\/|playlist\/))([a-zA-Z0-9]+)(.*)$/,Jt=/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube(-nocookie)?\.com|youtu.be))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,Wt=e=>Jt.test(e),Yt=e=>qt.test(e),Qt=e=>{const t=Jt.exec(e);return t?t[6]:null},Zt=e=>{const t=qt.exec(e);return t?t[1]+t[3]:null};function Xt(e){return Wt(e)&&Qt(e)?(e=>`<div class="ritsu-youtube-embed embed"> <iframe class="embed-responsive-item" \n  loading="lazy"\n  src="https://www.youtube.com/embed/${Qt(e)}"\n  frameborder="0" allowfullscreen></iframe></div>`)(e):Yt(e)&&Zt(e)?((e,t)=>`<div class="ritsu-spotify-embed spotify embed"><iframe \n  src="https://open.spotify.com/embed/${Zt(e)}?utm_source=generator"\n  loading="lazy"\n  height="${t} !important" frameBorder="0" allowfullscreen="" \n  allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">\n  </iframe></div>`)(e,(e=>e.includes("playlist")?380:80)(e)):null}var eo,to=o(14),oo=o.n(to),no=o(15),ro=o.n(no);function io(e){return Wt(e)||Yt(e)}function ao(e){const t=te.get(X.toggleEmbeds),o=document.querySelectorAll("."+e);t&&o&&o.forEach(e=>{const t=Array.from(e.children);t&&t.forEach(e=>{if(e.querySelectorAll(".embed").length)return;const t=ot(e.innerText);if(!Wt(t)&&!Yt(t))return;const o=document.createElement("div");o.classList.add("embed"),o.innerHTML="<br>"+Xt(t),e.appendChild(o)})})}function so(){ao("user-comment-right"),ao("user-micropost-right"),ao("room-component-message-text")}!function(e){e[e.Created=0]="Created",e[e.Alive=1]="Alive",e[e.Destroyed=2]="Destroyed"}(eo||(eo={}));const co=new Map;class lo{constructor(e,t=!1){this.state=eo.Created,this.preference=e,t&&this.load()}assertAlive(){if(this.state===eo.Destroyed)throw new Error("Attempted to use destroyed ListPreferenceCache object");if(this.state===eo.Created)throw new Error("Attempted to use uninitialized ListPreferenceCache object")}get store(){return this.assertAlive(),this.realStore}set store(e){this.assertAlive(),this.realStore=e}destroy(){this.assertAlive(),this.state=eo.Destroyed,this.preference&&co.delete(this.preference.key)}load(){const{preference:e}=this;if(co.has(e.key)&&co.get(e.key)!==this)throw new Error(lo.ERR_PREF_IN_USE);co.set(e.key,this),this.state=eo.Alive,this.loadFrom(te.get(this.preference))}save(){te.set(this.preference,this.asSaved())}}lo.ERR_PREF_IN_USE="Cannot create multiple ListPreferenceCache instances     linked to the same preference. Hint: .destroy() the previous instance";class uo extends lo{setItem(e,t){this._setItem(e,t),this.save()}addItem(e,t){this.setItem(e,t)}removeItem(e){const t=this._removeItem(e);return this.save(),t}}class mo extends lo{add(e){this._add(e),this.save()}remove(e){const t=this._remove(e);return this.save(),t}}class fo extends mo{hasItem(e){return this.store.has(e)}hasKey(e){return!1}values(){return[...this.store.values()]}entries(){return this.values()}_add(e){this.store.add(e)}_remove(e){return this.store.delete(e)}asSaved(){return this.values()}loadFrom(e){this.store=new Set(e)}}class ho extends uo{hasKey(e){return this.store.has(e)}hasItem(e){return this.values().some(t=>t===e)}getItem(e){return this.store.get(e)}_removeItem(e){return this.store.delete(e)}_setItem(e,t){return this.store.set(e,t)}values(){return[...this.store.values()]}entries(){return[...this.store.entries()]}asSaved(){return[...this.store.entries()]}loadFrom(e){this.store=new Map(e)}static just(e,t){const o=new ho(t,!0);e(o),o.destroy()}static addItem({key:e,item:t},o){return ho.just(o=>o.addItem(e,t),o)}static removeItem({key:e},t){return ho.just(t=>t.removeItem(e),t)}}const po=()=>te.get(X.imgurLastUploadTimes),go=()=>po().filter(e=>xe(new Date(e))<=108e5),bo=()=>go().length<50;function vo(){var e;e=[...po(),+new Date].slice(-50),te.set(X.imgurLastUploadTimes,e)}const yo=`You can upload 50 new images per ${$.timeago(+new Date-108e5)}.`,wo=()=>te.get(X.hideImageFallback),ko="https://api.imgur.com/3/image/",xo=we("rxe-imgur:"),Ro=()=>new RegExp(`imgur${nt}com/([a-z0-9]+)`,"i"),Co=e=>`https://i.imgur.com/${e}.png`,Ao=()=>({Authorization:"Client-ID "+(te.get(X.imgurAPIKey)||"b8f69bdcc4d1373")});function Mo({id:e,payload:t}){return{url:Co(e),payload:t,version:"0.11.0"}}function No(e){return wo()?`${xo}${we(e)}`:tt(Co(e))}async function Eo(e){return Mo(await async function(e){const t=new FormData;t.append("image",e);const o=await fetch(ko,{method:"POST",headers:Ao(),body:t});if(!o.ok)throw new Error(o.statusText);const{data:n}=await o.json(),{id:r,deletehash:i}=n;return ho.addItem({key:r,item:i},X.imgurDeleteHashes),vo(),{id:r,payload:No(r)}}(e))}function So(e,t=!0){const o=e.match(Ro());return o&&Mo({payload:t?No(o[1]):tt(o[0]),id:o[1]})}function _o(e){var t;const o=So(e,!1);if(o)return o;const n=null===(t=e.match(new RegExp(xo+"(\\S*)")))||void 0===t?void 0:t[1];if(void 0===n)return null;return Mo({id:function(e){let t="";for(let o=1;o<e.length;o+=2){const n=ye.indexOf(e[o]);if(-1===n)throw new Error("bad image path");t+=ve[(n-1)/2]}return atob(t)}(n),payload:n})}const To=["You are uploading your image to ",ne.a.createElement("a",{href:"https://imgurinc.com/privacy"},"Imgur"),". Anyone with the link can save or share it."],Uo="https://github.com/Ritsu-Projects/Public-Releases/",jo="https://rentry.co/97eydt",$o=tt(Uo),Oo=(e,t)=>`${t} · ${wo()?"Can't see it":"See just a link"}? Get RxE ${e}+: ${$o}`;function Po(e){const t=/\w/.test(e.payload)?"Image: "+e.payload:`[Image${e.payload}]`;return Math.random()<.5?Oo(e.version,t):t}function Io({url:e}){return ne.a.createElement(MessagePicture,{picture:{url:e}})}function Do({url:e},t=App.user){return{user:t,messages:[],picture:e}}function Bo(e){return _o(e)}async function Go(e){return Eo(e)}const Fo={ratelimit:yo,destination:To,lowKarma:"Warning: Due to low karma, images sent by you may be hidden from other users."};function Vo(e){const t="channel"===this.state.mode?50:5e3,{messages:o}=this.state;e.forEach(e=>{0===e.messages.length&&e.messages.push(""),o.length>t&&o.shift();const n=o[o.length-1];if(n&&Oe(n.user)===Oe(e.user)&&!n.picture&&!e.picture&&n.messages.length<16){const t=n.messages,i=t[t.length-1];if(e.messages[0]===i)return;(Wt(r=i)||Yt(r))&&o.push(e),o[o.length-1].messages.push(e.messages[0])}else o.push(e);var r}),this.setState({messages:o})}const zo=e=>ne.a.createElement("b",{style:{color:"#f00"}}," ",e," ");function Lo(e){const{user:t,karma:o,colour:n,textShadow:r,timeago:i}=e;return ne.a.createElement("span",{className:"user-extra"},ne.a.createElement("b",null,"(",o,")")," / ",ne.a.createElement("span",{style:{color:n,textShadow:r,whiteSpace:"nowrap"}},i),function(e){if(!e.proxy)return e.master?zo("MASTER"):e.mod?zo("MOD"):void 0}(t))}function Ho(e){const t=ot(e).replace("Image: ","");let o="text-only";return(io(t)||io("https://"+t)||_o(t))&&(o="embed"),ne.a.createElement("div",{className:o,key:JSON.stringify(e)},this.process(e))}function Ko(){le(oo.a),Message.prototype.content=function(){var e,t,o;const{data:n}=this.props,{picture:r,messages:i,user:a}=this.props.data,s=n.isMine||Oe(a)===Oe(App.user),c=te.get(X.imgProtect),l=function(e){return e?/^(data:image\/([a-zA-Z]*);base64,)|(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)$/.test(e):e}(r),u=(null===(e=$e(a))||void 0===e?void 0:e.temp)||(null!==(o=null===(t=$e(a))||void 0===t?void 0:t.karma)&&void 0!==o?o:0)<10,d=!s&&u&&c;if(r){if(!l)return ne.a.createElement("div",{className:"blocked-image"},ne.a.createElement("div",{className:"warning-text"},"This image was blocked as it was deemed malicious"));const e=Io({url:r});return d?ne.a.createElement("div",{className:"image-wrap"},ne.a.createElement("a",{className:"image-warning",onClick:this.showImage.bind(this)},"click here to show image"),ne.a.createElement("div",{className:"hidden"},e)):e}return i.map(e=>Ho.call(this,e))},Message.prototype.render=function(){var e,t,o,n,r,i,a,s,c,l,u;this.props.data.user||console.warn("this.props.data.user may be falsy despite declaration");const d=null!==(e=function(e){if(!("state"in RoomChannelMembersClient))return;const{members:t,members_persistent:o}=RoomChannelMembersClient.state;return(t||o).find(t=>(null==t?void 0:t.id)===e)}(Oe(this.props.data.user))||$e(this.props.data.user))&&void 0!==e?e:null,m=Oe(this.props.data.user)===Oe(App.user);let f=!1;App.room.muted.includes(Oe(d))&&(f=!0);try{const e=te.get(X.muteRegexes)[0];if(e&&(null==d?void 0:d.display_name)){const{source:t,flags:o}=e,n=new RegExp(t,o),r=["","(?:)"].includes(t);n.test(d.display_name)&&!r&&(f=!0)}}catch(e){}const h={string:(null===(t=null==d?void 0:d.display_name)||void 0===t?void 0:t.trim())||"(no name)",flair:null!==(o=null==d?void 0:d.flair)&&void 0!==o?o:{color:""}},p=Ne(null!==(r=null!==(n=null==d?void 0:d._karma)&&void 0!==n?n:null==d?void 0:d.karma)&&void 0!==r?r:0),g=te.get(X.imgProtect),b=(null===(i=$e(d))||void 0===i?void 0:i.temp)||(null!==(s=null===(a=$e(d))||void 0===a?void 0:a.karma)&&void 0!==s?s:0)<10,v=d?function(e){const t=Math.log(+new Date-+new Date(e.created_at)+1);return Math.min(t/Math.log(5e11),1)}(d):0,y=(null==d?void 0:d.created_at)&&new Date(null==d?void 0:d.created_at),w=y&&!Number.isNaN(y.getTime())?$.timeago(y):null,k=`hsl(${256*v}, 50%, 50%)`,x=["room-component-message-text"],{picture:R}=this.props.data;R&&x.push("ritsu-would-blur-heavy"),f&&x.push("ritsu-message-hidden");const C=(null===(c=null==d?void 0:d.display_picture)||void 0===c?void 0:c.startsWith("https://robohash.org/"))||(null===(l=null==d?void 0:d.display_picture)||void 0===l?void 0:l.startsWith("https://emeraldchat.com/avicons_strict/"))||m,A=["room-component-message-avatar"];C||A.push("ritsu-would-blur");const M=!C&&(f||b&&g),N=d?ne.a.createElement(Lo,{user:d,karma:p,timeago:w,color:k,textShadow:"0.005em 0.005em #FFF5"}):null,E=e=>d&&UserViewGenerator.generate({event:e,user:d}),S=ne.a.createElement("div",{className:"material-icons room-component-message-avatar ritsu-avatar-hidden",title:"User avatar hidden due to image settings",onMouseDown:E,role:"button",tabIndex:-1},"visibility_off"),_=ne.a.createElement("img",{className:A.join(" "),alt:"",src:null==d?void 0:d.display_picture,onMouseDown:E}),T=ne.a.createElement("div",{className:"room-component-flair",onMouseDown:E,role:"button",tabIndex:-1},ne.a.createElement(Flair,{data:h})),U=ne.a.createElement("div",{className:"room-component-report",onMouseDown:this.report_type.bind(this),role:"button",tabIndex:-1},ne.a.createElement("i",{className:"fa fa-warning fa-2x social"}));return ne.a.createElement("div",{className:"room-component-message-container","data-id":null==d?void 0:d.id},ne.a.createElement("div",{className:"room-component-message-left"},M?S:_),ne.a.createElement("div",{className:"room-component-message-right"},T,ne.a.createElement(Badge,{badge:null!==(u=null==d?void 0:d.badge)&&void 0!==u?u:null}),te.get(X.showInfo)&&N,ne.a.createElement("div",{className:x.join(" ")},f?ne.a.createElement("i",null,"Blocked message"):this.content())),U)},Room.prototype.received=function(e){var t,o,n,r;Oe(e.user)!==App.user.id&&e.messages&&(App.room.play_sound("/sfx/simple_alert.wav"),this.append(e),PushNotifications.idle()&&PushNotifications.send(null!==(o=null===(t=$e(e.user))||void 0===t?void 0:t.display_name)&&void 0!==o?o:"",{icon:null!==(r=null===(n=$e(e.user))||void 0===n?void 0:n.display_picture)&&void 0!==r?r:"",body:e.messages[0]}))}}function qo(){var e,t;const o=document.querySelectorAll(".room-component-message-container"),n=null===(e=null===RoomClient||void 0===RoomClient?void 0:RoomClient.state)||void 0===e?void 0:e.messages;if(null==n?void 0:n.length)for(let e=0;e<n.length;e+=1){const r=null===(t=o[e])||void 0===t?void 0:t.querySelector(".room-component-message-text");if(!r||r.classList.contains("ritsu-message-hidden"))continue;const{messages:i}=n[e],a=r.childNodes;if(a){for(;a&&a.length>i.length;)a[0].remove();if(!a||a[0]||!a[0].classList)return;te.get(X.bigEmoji)&&1===i.length&&/^\p{Extended_Pictographic}{1,5}$/u.test(i[0])?a[0].classList.add("jumbo-message"):a[0].classList.remove("jumbo-message")}}}const Jo=(()=>{let e=0;return()=>"key-"+ ++e})();function Wo(){Room.prototype.room_messages=function(e="room-component-messages"){let t=null,o="",n=0;return this.state.messages.forEach(e=>{n+=e.messages.length}),this.state.messages_count>n&&this.state.messages.length>0&&(t=ne.a.createElement("div",{role:"button",tabIndex:0,onMouseDown:()=>this.load_messages(n),className:"room-component-load-button"},"Load More (",n," of ",this.state.messages_count,")")),"private"===this.state.mode&&this.state.messages.length<1&&(o=ne.a.createElement("div",{className:"room-notification"},"No messages here yet. Start a conversation!")),RoomChannelSelectClient.state&&"channel"===this.state.mode&&this.state.messages.length<1&&(o=ne.a.createElement("div",{className:"room-notification"},"No messages here yet!")),ne.a.createElement("div",{id:"messages",className:e},ne.a.createElement(MuteButton,null),this.state.print,o,t,this.state.messages.map(e=>(e.user=function(e){var t;const o=null===(t=null===RoomChannelMembersClient||void 0===RoomChannelMembersClient?void 0:RoomChannelMembersClient.state)||void 0===t?void 0:t.members_persistent;return o?(o.forEach(t=>{(null==t?void 0:t.id)===e.user.id&&(e.user=t)}),e.user):e.user}(e),e.key||(e.key=Jo()),ne.a.createElement(Message,{data:e,key:e.key}))),this.state.print_append)},Room.prototype.append=function(e){Vo.call(this,[e])}}function Yo(e,t){const o=Object.assign({success:async e=>e,error:async(e,t,o)=>{throw new Error(o)}},t);e.success=function(e,{success:t}){const o=ke(Pe(e.success)),n=ke(Pe(e.error));return(e,...r)=>{(async()=>{try{const n=await t(e,...r);o.forEach(e=>e(n,...r))}catch(e){const t=r[1],o=e instanceof Error?e.message:"";n.forEach(e=>e(t,"error",o))}})()}}(e,o),e.error=function(e,{error:t}){const o=ke(Pe(e.success)),n=ke(Pe(e.error));return(e,...r)=>{(async()=>{try{const n=await t(e,...r);o.forEach(t=>t(n,"success",e))}catch(t){t instanceof Error&&(r[1]=t.message),n.forEach(t=>t(e,...r))}})()}}(e,o)}const Qo=new EventTarget;let Zo=[];function Xo(e){const t=new CustomEvent(e?"connected":"disconnected");Qo.dispatchEvent(t)}function en(){(function(e,t,o="Timed out"){return Promise.race([e,he(t).then(()=>Promise.reject(new Error(o)))])})(new Promise(e=>Zo.push(e)),5e3).catch(()=>{Xo(!1)})}function tn(){Zo.forEach(e=>e()),Zo=[],Xo(!0)}var on;function nn(e,t){const{SendRequest:o,AbortRequest:n}=on;return o}function rn(){const e=$.ajax;$.ajax=function(t,o){const n="string"==typeof t?Object.assign(Object.assign({},o),{url:t}):t;return void 0===(null==n?void 0:n.url)?e(n):nn(n.url)===on.SendRequest?(function(e){en(),Yo(e,{success:async e=>(tn(),e),async error(e,t,o){throw tn(),new Error(o)}})}(n),e(Object.assign({},n))):void 0},Qo.addEventListener("connected",()=>{document.documentElement.classList.remove("network-unavail")}),Qo.addEventListener("disconnected",()=>{document.documentElement.classList.add("network-unavail")})}!function(e){e[e.AbortRequest=0]="AbortRequest",e[e.SendRequest=1]="SendRequest"}(on||(on={}));var an=o(2),sn=o.n(an);var cn=o(16),ln=o.n(cn),un=o(6),dn={insert:"head",singleton:!1},mn=(ln()(un.a,dn),un.a.locals||{});function fn(){return ne.a.createElement("div",{className:mn.ldsDualRing})}function hn(){this.setState({right_panel:!0,left_panel:!0,print:""})}function pn(e){App.room.join(this.props.data.id),Vo.call(this,e.messages),this.setState({messages_count:e.messages_count,id:this.props.data.id}),this.scroll()}function gn(){hn.call(this),$.ajax({type:"GET",url:"/default_private_messages?id="+this.props.data.id,dataType:"json",success:pn.bind(this)})}function bn(e){this.setState({print:ne.a.createElement(MatchMenu,{data:{queue:e}})})}function vn(){const e={match:"text",match_video:"video",match_voice:"voice",channel:"",private:""};function t(e){const{channel:t}=e;this.setState({current_channel:t}),"voice"===t.channel_type&&this.voice_connect(e),null===RoomClient||void 0===RoomClient||RoomClient.clear_messages(),$.ajax({type:"GET",url:"channel_json?id="+t.id,dataType:"json",success(e){const{messages:t}=e;RoomChannelMembersClient.setState({members:e.members}),RoomClient&&Vo.call(RoomClient,t),null===RoomClient||void 0===RoomClient||RoomClient.scroll()}}),App.room.join("channel"+t.id),RoomClient.state.last_message=null,null===RoomClient||void 0===RoomClient||RoomClient.scroll()}Room.prototype.componentDidMount=function(){this.clear_print();const{mode:t}=this.state,o=e[t];o?bn.call(this,o):"channel"===t?hn.call(this):"private"===t&&gn.call(this)},Room.prototype.trim_messages=function(){const e="channel"===this.state.mode?100:5e3,{messages:t}=this.state;t.length>e&&t.shift(),this.setState({messages:t})},Room.prototype.start_typing=function(e){var t;if(e.id===App.user.id)return;let o;o=null===(t=RoomChannelMembersClient.state.members.find(t=>(null==t?void 0:t.id)===e.id))||void 0===t?void 0:t.display_name,o||(o=e.display_name),this.setState({typing:o}),x.typing_timer=setTimeout(()=>{this.stop_typing()},1e4)},RoomChannelSelect.prototype.join=function(e){App.webrtc.client&&this.voice_disconnect(),this.expand(!1),this.setState({messages:[]}),this.updated=t.bind(this),this.updated(e),this.updated=function(){}},Room.prototype.start_typing=function(e){e.id!==App.user.id&&(this.setState({typing:Ee(e.display_name)}),x.typing_timer=setTimeout(()=>{this.stop_typing()},1e4))}}function yn(){x.MenuReactMicroStatic||(x.MenuReactMicroStatic={close:()=>null===MenuReactMicro||void 0===MenuReactMicro?void 0:MenuReactMicro.close()}),x.DashboardClient||(x.DashboardClient={setState:()=>{}}),$(x).off("resize").on("resize",()=>{const e=document.getElementById("messages");e&&(e.scrollTop=e.scrollHeight)}),Dashboard.prototype.ads=function(){return ne.a.createElement("div",{})},function(){function e(e){if(!e.updater.isMounted(e))return;const t=sn.a.findDOMNode(e);t&&sn.a.unmountComponentAtNode(t.parentNode)}function t(t){$(t[0]).removeClass("animated fadeIn"),$(t[0]).removeClass("animated fadeOut"),$(t[1]).addClass("animated zoomOut"),setTimeout(e.bind(null,this),70)}function o(){t.call(this,["#menu-micro-bg","#menu-micro"])}function n(t){e(this),t.nativeEvent.stopImmediatePropagation()}Menu.prototype.close=function(){t.call(this,[".ui-bg",".ui-menu"])},UserProfile.prototype.close=function(){t.call(this,[".ui-bg",".user-profile-menu"]),setTimeout(()=>{UserProfileReact=null})},FriendsMenu.prototype.componentDidMount=function(){$.ajax({type:"GET",url:"/friends_json",dataType:"json",success:function(e){const{friends:t}=e;e.friends=t.filter(e=>null!==e);const o=this.state.skippedMissing||0,n=t.filter(e=>null===e);this.setState({friends:e.friends,count:e.count,skippedMissing:o+n.length})}.bind(this)})},FriendsMenu.prototype.load_friends=function(){const e=this.state.skippedMissing||0,t=this.state.friends.length+e;$.ajax({type:"GET",url:"/load_friends_json?offset="+t,dataType:"json",success:function(t){if(0===t.length)return;const o=t.filter(e=>null===e),n=t.filter(e=>!o.includes(e)),r={skippedMissing:e+o.length,search:[],friends:[...this.state.friends,...n],count:this.state.count};this.setState(r)}.bind(this)})},MenuMicro.prototype.close=o,MenuMicroStatic.prototype.close=o,UserView.prototype.close=function(){document.removeEventListener("mousedown",this.exit_click,!1),e(this)},UserView.prototype.view_profile=function(){const{id:t}=this.state.user;UserProfileReact?UserProfileReact.switch(t):sn.a.render(ne.a.createElement(UserProfile,{key:t,id:t}),document.getElementById("ui-hatch")),e(this)},Popup.prototype.close=n,Picture.prototype.close=n,UserView.prototype.exit_click=function(e){e.target instanceof HTMLElement&&(e.target.matches(".user-profile-micro, .user-profile-micro *")||this.close())},UserProfile.prototype.componentDidMount=function(){$.ajax({type:"GET",url:"/profile_json?id="+this.props.id,dataType:"json",success:e=>this.setState({data:e}),error:()=>this.close()})},NotificationUnit.prototype.action=function(e){var t,o,n,r,i,a,s,c,l,u,d,m;const{target:f}=e;if(!(f instanceof Node))return;const h=f instanceof Element?f:f.parentElement;if(!h)return;if(h.matches(".notification-button, .notification-button *"))return;const p=this.props.data,g=null!==(t=p.data.sender)&&void 0!==t?t:p.data.user;if(!("unit"in p.data)||"friend_request"===p.tier)return void(g?UserViewGenerator.generate({event:e,user:g}):console.error("Could not get notification user for UserView."));"unit"in p.data&&(App.params=p.data.unit);const b=null!==(m=null!==(l=null!==(s=null!==(i=null!==(n=null===(o=p.data.unit)||void 0===o?void 0:o.post.user_id)&&void 0!==n?n:null===(r=p.data.unit)||void 0===r?void 0:r.author.id)&&void 0!==i?i:null===(a=p.data.unit)||void 0===a?void 0:a.post.author_id)&&void 0!==s?s:null===(c=p.data.unit)||void 0===c?void 0:c.comment.author_id)&&void 0!==l?l:null===(d=null===(u=p.data)||void 0===u?void 0:u.sender)||void 0===d?void 0:d.id)&&void 0!==m?m:p.sender_id;UserProfileReact&&UserProfileReact.load(b);const v=ne.a.createElement(UserProfile,{id:b});sn.a.render(v,document.getElementById("ui-hatch"))},NotificationUnit.prototype.image=function(){var e,t,o;return ne.a.createElement("img",{className:"navigation-notification-unit-image",src:null===(o=null===(t=null===(e=this.props.data)||void 0===e?void 0:e.data)||void 0===t?void 0:t.sender)||void 0===o?void 0:o.display_picture})},NotificationUnit.prototype.content=function(){var e,t;const{content:o,sender:n}=this.props.data.data,r={string:null!==(e=null==n?void 0:n.display_name)&&void 0!==e?e:"(no name)",flair:null!==(t=null==n?void 0:n.flair)&&void 0!==t?t:{color:""}},i=ne.a.createElement(Flair,{data:r}),a=o.length>64?o.substring(0,64)+"...":o,s=ne.a.createElement("span",{className:"navigation-notification-unit-message"},a);return ne.a.createElement("span",null,i,s)}}(),App.karma.data[0].range[1]=-1/0,App.temp.check=()=>{},SetGenderRenderer.render=function(){},UserViewGenerator.generate=function(e){e.event.preventDefault(),e.user.display_name=Ee(e.user.display_name);const t=e.event.clientX,o=e.event.clientY,n=ne.a.createElement(UserView,{data:{x:t,y:o,user:e.user}});sn.a.render(n,document.getElementById("ui-hatch-3")),UserViewReact&&UserViewReact.switch(e.user)},Flair.prototype.render=function(){const{data:{flair:e,string:t},onClick:o}=this.props;return ne.a.createElement("span",{className:"user-flair",style:null!=e?e:{color:""},onClick:o},t)},UserProfile.prototype.render=function(){const e=this.state.data?[this.top(),this.bottom()]:[ne.a.createElement(fn)];return ne.a.createElement("div",{className:"ui-menu-container"},ne.a.createElement("div",{onMouseDown:this.close.bind(this),className:"animated fadeIn ui-bg"}),ne.a.createElement("div",{className:"animated zoomIn user-profile-menu"},...e))},CommentSettings.prototype.authorized=function(){var e;const t=this.props.parent,{micropost_data:o,comment_data:n}=t.state,{wall:r,current_user:i}=o;return i.mod||i.master||null!=r&&(null===(e=null==n?void 0:n.user)||void 0===e?void 0:e.id)===i.id},vn()}const wn=new fo(X.blockedHashes),kn=new fo(X.savedPictures);const xn=function(e){const t={};return async o=>{const n="number"==typeof o?o.toString():o;return Object.prototype.hasOwnProperty.call(t,n)||(t[n]=await e(n)),t[n]}}(async e=>{const t=(new TextEncoder).encode(e),o=await crypto.subtle.digest("SHA-1",t);return Array.from(new Uint8Array(o)).map(e=>e.toString(16).padStart(2,"0")).join("")});async function Rn(){var e;document.querySelectorAll(".room-component-message-picture-container, .image-wrap").forEach(async e=>{if(te.get(X.imgControl)&&!e.querySelector(".picture-control")){const t=se("div",{className:"picture-control"});t.append(se("div",{className:"picture-button block material-icons",textContent:"delete_forever",title:"Block this image",onmousedown:e=>{var t,o;if(!(e.target instanceof HTMLElement))return;const n=null===(o=null===(t=e.target.parentElement)||void 0===t?void 0:t.parentElement)||void 0===o?void 0:o.firstChild;!async function(e){if(!e)return;const t=await xn(e);wn.add(t),Rn()}(null==n?void 0:n.src)}})),t.append(se("div",{className:"picture-button save material-icons",textContent:"bookmark_border",title:"Bookmark this image",onmousedown:e=>{var t,o;if(!(e.target instanceof HTMLElement))return;const n=null===(o=null===(t=e.target.parentElement)||void 0===t?void 0:t.parentElement)||void 0===o?void 0:o.firstChild;!function(e){e&&kn.add(e)}(null==n?void 0:n.src)}})),e.append(t)}if(!(e.firstChild instanceof HTMLImageElement))return;const{src:t}=e.firstChild,o=await xn(t);wn.hasItem(o)&&(e.firstChild.src="")});const t=document.querySelector("form#picture_upload");if(!t)return;const o=t.parentElement,n=o.querySelector(".ui-menu-text");"B"!==(null===(e=null==n?void 0:n.firstElementChild)||void 0===e?void 0:e.tagName)||UserProfileReact?n&&(n.style.display=""):n.style.display="none";if(o.querySelector(".image-grid"))return;const r=o.querySelector(".ui-menu-buttons"),i=se("div",{className:"image-grid"});kn.values().forEach(e=>{const t=se("div",{style:`background-image: url(${encodeURI(e)}), url(${encodeURI("https://emeraldchat.com/avicons_strict/1.png")})`,onmousedown:()=>{!function(e){const t=(new Date).toISOString(),o={author_id:App.user.id,created_at:t,description:null,id:955e4+~~(1e6*Math.random()),image:{thumb:{url:e},url:e},image_processing:!1,image_tmp:null,micropost_id:null,picture_album_id:null,temporary:!1,title:null,updated_at:t,url:e};PictureUploader.onUploaded(o)}(e),MenuReactMicro.close()}});t.append(se("div",{className:"picture-button material-icons",textContent:"bookmark_remove",title:"Unbookmark this image",onmousedown:o=>{o.stopPropagation(),confirm("Are you sure you want to unbookmark this image?")&&(kn.remove(e),t.remove())}})),i.append(t)}),o.insertBefore(i,r)}function Cn(){return`${a} ${c}`}const An={};function Mn(e,t){An[e]||(An[e]=[]),An[e].push(t)}function Nn(e,t){An[e]||(An[e]=[]);const o=An[e].indexOf(t);o>-1&&An[e].splice(o,1)}function En(e,t){An[e]||(An[e]=[]);let o=!1;const n=Object.assign(Object.assign({},t),{type:e,preventDefault(){o=!0}});return An[e].forEach(e=>e(n)),o}function Sn(){const e={version:Cn,addEventListener:Mn,removeEventListener:Nn,dispatchEvent:En};ue(App.room,"join",e=>{En("room.join",{room:e}),ue(App.room.client,"received",e=>{var t;En("room.received",e),e.user&&e.user_disconnected&&En("user.left",e),e.user&&e.user_connected&&En("user.joined",e),e.messages&&e.messages.length&&En("user.message",e),(t=e).typing?null===RoomClient||void 0===RoomClient||RoomClient.start_typing(t.user):null===RoomClient||void 0===RoomClient||RoomClient.stop_typing()})}),ue(App.room,"leave",e=>{En("room.leave",{room:e})}),x.RxE=e}function _n(){var e,t;const o=document.evaluate("//li[text()='Emerald Gold']",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,n=document.evaluate("//li[text()='Premium Badge']",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;te.get(X.adBlocker)?(o instanceof HTMLElement&&o.remove(),n instanceof HTMLElement&&n.remove()):(o&&(null===(e=o.parentElement)||void 0===e?void 0:e.firstChild)===o&&o.parentElement.append(o),n&&(null===(t=n.parentElement)||void 0===t?void 0:t.firstChild)===n&&n.parentElement.append(n))}function Tn(e){const{id:t,value:o,onChange:n,children:r}=e;return ne.a.createElement("div",null,ne.a.createElement("input",{type:"checkbox",id:t,checked:o,onChange:n}),ne.a.createElement("label",{htmlFor:t},t in ee?ee[t].label:null!=r?r:null))}function Un(e){const{id:t,value:o,onChange:n,inline:r}=e,i=ee[t];if(!(i instanceof D))throw new Error("RadioSetting can only be used with MultichoicePreference");return ne.a.createElement("div",{className:"ritsu-radio-setting-root"},ne.a.createElement("label",{htmlFor:t,className:"m1 "+mn.settingsSection},i.label),ne.a.createElement("div",{id:t,style:{display:"flex",flexDirection:r?"row":"column"}},i.options.map(({value:e,label:r})=>ne.a.createElement("div",{className:"ritsu-radio-setting-option"},ne.a.createElement("input",{type:"radio",id:`${t}-option-${e}`,name:t,value:e,checked:o===e,onChange:()=>n(e)}),ne.a.createElement("label",{htmlFor:`${t}-option-${e}`},r)))))}function jn(e){const{id:t,value:o,onChange:n,placeholder:r,children:i}=e;return ne.a.createElement("div",null,ne.a.createElement("input",{id:t,value:o,placeholder:r,onChange:n}),ne.a.createElement("label",{htmlFor:t},t in ee?ee[t].label:null!=i?i:null))}function $n(e){const t=new Set(e.map(e=>e[0])),o=new Set(te.get(X.permaMuteList).map(e=>e[0])),{added:n,removed:r}=function(e,t){const o=new Set,n=new Set;return Array.from(e.values()).forEach(e=>{t.has(e)||o.add(e)}),Array.from(t.values()).forEach(t=>{e.has(t)||n.add(t)}),{added:o,removed:n}}(o,t);n.forEach(e=>App.room.mute(e)),r.forEach(e=>App.room.unmute(e))}class On extends ne.a.Component{constructor(e){super(e),this.state={items:Array.from(e.value)}}handleItemRemoval(e){const{onChange:t,removeItem:o}=this.props,n=o(e,this.items());this.setState({items:n}),t(n)}items(){const{items:e}=this.state;return Array.from(e)}itemJSX(e){const{renderItem:t}=this.props;return ne.a.createElement("div",null,ne.a.createElement("span",Object.assign({className:"ui-button-text",style:{margin:"0 0.5em 0 0",padding:"0 0.5em",borderRadius:"0.25em",backgroundColor:"#e00000"}},Ue(()=>this.handleItemRemoval(e),{allowSpace:!0}),{role:"button",tabIndex:0}),"×"),ne.a.createElement("span",{style:{display:"inline-flex",alignItems:"center"}},t(e)))}render(){const{id:e,children:t}=this.props,{items:o}=this.state;if(!(ee[e]instanceof I))throw new Error("ListSetting can only be used with ListPreference");return ne.a.createElement("div",null,ne.a.createElement("div",{id:e,style:{display:"block"}},0===o.length?t:o.map(this.itemJSX.bind(this))))}}function Pn(e,t){const{[e]:o}=t,n="applySettings"in t?t.applySettings:t.applyHacks;return ne.a.createElement(Tn,{id:e,value:o,onChange:()=>n({[e]:!o})})}function In(e,t){return ne.a.createElement("div",{className:"m1 "+e},t)}function Dn(e){const t=ne.a.createElement(UserProfile,{id:e});sn.a.render(t,document.getElementById("ui-hatch"))}const Bn={g:"Global",i:"Case insensitive",m:"Multiline",u:"Unicode"};function Gn(e){var t,o;const{id:n,value:r,onChange:i,flagsAllowed:a,children:s}=e;let c=null!==(t=null==r?void 0:r.source)&&void 0!==t?t:"",l=null!==(o=null==r?void 0:r.flags)&&void 0!==o?o:"";const u=(e,t)=>{if(null!=e&&(c=e),null!=t&&(l=t.join("")),""!==c)try{i(new RegExp(c,l))}catch(e){i({source:c,flags:l})}else i({source:c,flags:l})};return ne.a.createElement("div",null,ne.a.createElement(jn,{id:n+"-text",value:c,placeholder:"Regular expression",onChange:({currentTarget:e})=>u(e.value)},n in ee?ee[n].label:s),a.split("").map(e=>Object.prototype.hasOwnProperty.call(Bn,e)?ne.a.createElement(Tn,{id:`${n}-flag-${e}`,value:l.includes(e),onChange:({currentTarget:t})=>{const o=(n=e,l.split("").filter(e=>e!==n));var n;const r=[...o,e];u(null,t.checked?r:o)}},Bn[e]):null))}function Fn(e){var t;const{muteRegexes:o,applySettings:n}=e;return ne.a.createElement("div",{className:mn.settings},In(mn.settingsSection,Y.generalTitle),Pn("adBlocker",e),Pn("trackKarma",e),Pn("fancyColors",e),Pn("notifyUpdates",e),Pn("hideTyping",e),App.user.mod&&Pn("hideFromGc",e),function(e,t){const{applySettings:o,[e]:n}=t;return ne.a.createElement(Un,{id:e,value:n,onChange:t=>o({[e]:t}),inline:!1})}("blockReqs",e),In(mn.settingsSection,Y.imagesTitle),Pn("imgBlur",e),Pn("imgProtect",e),Pn("legacyImages",e),Pn("hidePfp",e),Pn("showAnimatedImages",e),Pn("imgControl",e),Pn("hideImageFallback",e),In(mn.settingsSection,Y.messageTitle),Pn("antiSpam",e),Pn("showGender",e),Pn("showInfo",e),Pn("highlightMentions",e),Pn("bigEmoji",e),Pn("toggleEmbeds",e),Pn("largerText",e),In(mn.settingsSection,Y.advancedTitle),Pn("ignoreURLBlacklist",e),function(e,t,o){const{applySettings:n,[e]:r}=t;return ne.a.createElement(jn,{id:e,value:r,onChange:t=>n({[e]:t.target.value}),placeholder:o})}("imgurAPIKey",e,Y.preferences.imgurAPIKey.placeholder),ne.a.createElement(Gn,{id:"muteRegexes",value:null!==(t=o[0])&&void 0!==t?t:{source:"",flags:""},onChange:({source:e,flags:t})=>n({muteRegexes:[{source:e,flags:t}]}),flagsAllowed:"i"}),function(e){const{applySettings:t,permaMuteList:o}=e;return ne.a.createElement(On,{id:"permaMuteList",value:o,removeItem:([e],t)=>t.filter(t=>t[0]!==e),renderItem:([e,t])=>[ne.a.createElement("span",{className:"ritsu-permamutelist-user-name"},t),ne.a.createElement("span",{className:"material-icons permamute-list",onClick:()=>Dn(e),onKeyDown:()=>Dn(e),role:"button",tabIndex:0},"account_circle")],onChange:e=>{$n(e),t({permaMuteList:e}),null===NotificationsReact||void 0===NotificationsReact||NotificationsReact.update()}},"No mutes active")}(e))}var Vn=o(17),zn=o.n(Vn),Ln=o(3),Hn=o.n(Ln),Kn=o(18),qn=o.n(Kn),Jn=o(19),Wn=o.n(Jn),Yn=o(20),Qn=o.n(Yn),Zn=o(21),Xn=o.n(Zn);const er=["default","ritsu","light","teriblast","teriblast V2"];function tr(){const e=te.get(X.theme);let t=document.head.querySelector(".custom-theme");t||(document.head.append(se("style",{className:"custom-theme",type:"text/css"})),t=document.head.querySelector(".custom-theme"));const o=[zn.a];switch(e){case"default":default:break;case"ritsu":o.push(Hn.a,qn.a);break;case"light":o.push(Hn.a,Wn.a);break;case"teriblast":o.push(Hn.a,Qn.a);break;case"teriblast V2":o.push(Hn.a,Xn.a)}t.textContent=o.join("\n")}function or(e){const{theme:t,applyTheme:o}=e;return ne.a.createElement("div",null,ne.a.createElement("div",{className:"m1 "+mn.settingsSection},Y.themeTitle),er.map(e=>ne.a.createElement("div",null,ne.a.createElement("input",{type:"radio",id:e,name:"theme",value:e,checked:t===e,onChange:()=>o(e)}),ne.a.createElement("label",{htmlFor:e},e[0].toUpperCase()+e.slice(1)))))}var nr=o(22),rr=o.n(nr),ir=o(23),ar=o.n(ir),sr=o(24),cr=o.n(sr),lr=o(25),ur=o.n(lr);const dr={roboto:"Default Font",comic_sans:"Comic Sans MS",helvetica:"Helvetica",trebuchet:"Trebuchet MS",verdana:"Verdana"};function mr(){const e=te.get(X.font);let t=document.head.querySelector(".custom-font");t||(document.head.append(se("style",{className:"custom-font",type:"text/css"})),t=document.head.querySelector(".custom-font"));const o=[];switch(e){case"Default Font":default:break;case"Comic Sans MS":o.push(ar.a);break;case"Helvetica":o.push(cr.a);break;case"Trebuchet MS":o.push(ur.a);break;case"Verdana":o.push(rr.a)}t.textContent=o.join("\n")}var fr=o(26),hr=o.n(fr);class pr extends oe.Component{constructor(e){super(e),this.handleFontChange=e=>{const t=e.target.value;te.set(X.font,t),this.setState({font:t});const{applyFont:o}=this.props;o(t)},this.state={font:e.currentFont}}render(){const{font:e}=this.state;return ne.a.createElement("div",null,ne.a.createElement("div",{className:"m1 "+hr.a.settingsSection},Y.fontTitle),ne.a.createElement("label",{className:"ui-select",htmlFor:"font"},ne.a.createElement("select",{name:"font",id:"font",value:e,onChange:this.handleFontChange},Object.keys(dr).map(e=>ne.a.createElement("option",{key:e,value:dr[e]},dr[e])))))}}class gr extends ne.a.Component{constructor(){super({}),this.applySettings=e=>{const{settings:t}=this.state,o=Object.assign(Object.assign({},t),e);Object.keys(e).forEach(t=>te.set(X[t],e[t])),wr(),this.setState({settings:o,needsReload:!0})},this.applyTheme=e=>{te.set(X.theme,e),document.body.classList.add("themeChange"),tr(),this.setState({theme:e}),setTimeout(()=>document.body.classList.remove("themeChange"),1e3)},this.applyFont=e=>{mr(),this.setState({font:e})},this.v=e=>{},this.state=Object.assign(Object.assign({},yr()),{needsReload:!1})}render(){const{theme:e,font:t,settings:o,k:n,needsReload:r}=this.state,i={fonts:{roboto:"Default Font",comic_sans:"Comic Sans MS",helvetica:"Helvetica",trebuchet:"Trebuchet MS",verdana:"Verdana"},currentFont:t,applyFont:this.applyFont};return ne.a.createElement("div",null,ne.a.createElement(or,{theme:e,applyTheme:this.applyTheme}),ne.a.createElement(pr,Object.assign({},i)),ne.a.createElement(Fn,Object.assign({},o,{applySettings:this.applySettings})),!1,r&&ne.a.createElement("div",{className:mn.reloadWarning},"You may need to reload the app for your changes to take effect."))}}function br(){return ne.a.createElement(Menu,null,ne.a.createElement("div",{key:"custom_menu",className:mn.ritsuMenuContainer},"Ritsu Settings",ne.a.createElement("br",null),ne.a.createElement("br",null),ne.a.createElement(gr,null),ne.a.createElement("div",{className:"ui-menu-buttons"},ne.a.createElement("div",{role:"button",tabIndex:0,className:"ui-button-text",onMouseDown:()=>MenuReact.close()},"Close"))))}function vr(e){return function(e,t){const o=Object.getOwnPropertyNames(e).map(o=>[o,t(o,e[o])]);return Object.fromEntries(o)}(function(e,t){const o=Object.getOwnPropertyNames(e).filter(o=>e[o]instanceof t).map(t=>[t,e[t]]);return Object.fromEntries(o)}(e,P),(e,t)=>te.get(t))}function yr(){return Object.assign(Object.assign({theme:te.get(X.theme),font:te.get(X.font)},!1),{settings:Object.assign(Object.assign({},vr(X)),{muteRegexes:te.get(X.muteRegexes),imgurAPIKey:te.get(X.imgurAPIKey),blockReqs:te.get(X.blockReqs),permaMuteList:te.get(X.permaMuteList)})})}function wr(){const e=yr().settings;Object.keys(e).forEach(t=>{"boolean"==typeof e[t]&&document.documentElement.classList.toggle(t,e[t])}),tr(),mr()}function kr(){sn.a.render(ne.a.createElement(br,null),document.getElementById("ui-hatch"))}function xr(){const e=document.querySelector(".navigation-dropdown-ritsu"),t=document.querySelector(".navigation-dropdown-content");!e&&t&&t.prepend(se("li",{className:"navigation-dropdown-ritsu",textContent:"Ritsu Menu",onmousedown:kr}))}var Rr=o(27),Cr=o.n(Rr);const Ar=ne.a.createElement("button",{className:"material-icons navigation-notification-unit lookup-button",onClick:function(){if("undefined"==typeof UserViewReact&&(UserViewGenerator.generate({event:{preventDefault:()=>{},clientX:100,clientY:100},user:{karma:100,id:2}}),UserViewReact.close(),"undefined"==typeof UserViewReact))return;const e=prompt("Enter a user id",""+UserViewReact.state.user.id);if(null===e)return;const t=parseInt(e,10);Number.isNaN(t)||(UserViewReact.state.user.id=t,UserViewReact.view_profile())},type:"button"},"face"),Mr=ne.a.createElement("div",{className:"navigation-dropdown-content"},ne.a.createElement("div",null,Y.preferences.userSort.label),["name.asc","name.desc","age.asc","age.desc"].map(e=>ne.a.createElement("li",{className:te.get(X.userSort)===e?"selected":"",onClick:()=>function(e){te.set(X.userSort,e),RoomChannelMembersClient instanceof RoomChannelMembers&&RoomChannelMembersClient.setState(RoomChannelMembersClient.state)}(e)},Y.preferences.userSort[e]))),Nr=ne.a.createElement("div",{className:"navigation-dropdown sort-button"},ne.a.createElement("span",{className:"material-icons navigation-notification-unit"},"arrow_drop_down"),Mr);let Er;function Sr(e,t){var o;"setState"in RoomChannelMembersClient&&(null===RoomClient||void 0===RoomClient||RoomClient.setState({messages:[],current_channel:e}),RoomChannelMembersClient.setState({members:[]}),App.room.join(e),document.querySelectorAll(".channel-unit").forEach(e=>e.classList.remove("channel-unit-active")),null===(o=document.querySelector(t))||void 0===o||o.classList.add("channel-unit-active"),null===RoomClient||void 0===RoomClient||RoomClient.print(ne.a.createElement("div",null,Y.privateRoomsWarning)),Er=e)}function _r(){document.querySelector(".wfaf.channel-unit-active")||Sr("",".wfaf")}function Tr(){const e=prompt(Y.privateRoomsPrompt);null!=e&&Sr(e,".private-rooms")}function Ur(e){const{type:t}=e||{},{action:o}=e||{},{text:n}=e||{};return ne.a.createElement("div",{className:"channel-unit "+t,onClick:()=>o(),onKeyPress:()=>o(),role:"button",tabIndex:0},n)}function jr(){RoomChannelSelect.prototype.body=function(){const{text_channels:e}=this.state;return ne.a.createElement("div",{className:"room-component-module"},ne.a.createElement("div",{className:"room-user-label"},"text channels"),e.map(e=>this.channel_button(e)),ne.a.createElement("div",{className:"room-user-label"},Y.hiddenChannels),ne.a.createElement(Ur,{type:"wfaf",action:_r,text:Y.WFAF}),ne.a.createElement(Ur,{type:"private-rooms",action:Tr,text:Y.privateRooms}))},function(){const e=ActionCable.Subscriptions.prototype.reject;ActionCable.Subscriptions.prototype.reject=function(t){t===App.room.client.identifier&&App.room.id===Er&&me("ERROR: You could not join room "+(Er||"WFAF")),e.call(this,t)}}()}function $r(){function e(e){null===RoomClient||void 0===RoomClient||RoomClient.trim_messages();const t=null===RoomClient||void 0===RoomClient?void 0:RoomClient.state.messages;t&&(e.forEach(e=>{0===t.length&&t.unshift(e);const o=t[0],n=Oe(o.user)===Oe(e.user),r=o.picture||e.picture,i=o.messages.length>=16;if(!n||r||i)return void t.unshift(e);const a=e.messages[0];o.messages[0]===a||o.messages.unshift(e.messages[0])}),null===RoomClient||void 0===RoomClient||RoomClient.setState({messages:t}))}Room.prototype.load_messages=function(t){const o=(n=t)+20<=RoomClient.state.messages_count?-n-20:-RoomClient.state.messages_count;var n;$.ajax({type:"GET",url:`/room_load_more?loaded=${o}&id=${this.state.id}`,dataType:"json",success:t=>e.call(this,t.reverse())})},Room.prototype.switch=function(e){this.clear_print();const{id:t}=e;App.room.join(t),this.state.last_message=null,this.setState({id:t,messages:[],messages_count:0,typing:null,mode:e.mode||"default"}),"private"===e.mode&&$.ajax({type:"GET",url:"/default_private_messages?id="+t,dataType:"json",success:e=>{Vo.call(this,e.messages),this.setState({messages_count:e.messages_count}),this.scroll()}})}}var Or=o(28),Pr=o.n(Or);function Ir(){le(Pr.a),Room.prototype.room_input=function(){return ne.a.createElement("div",{className:"room-component-input"},ne.a.createElement("textarea",{id:"room-input",className:"room-component-input-textarea",onMouseDown:()=>this.scroll(),onKeyDown:e=>this.input(e),placeholder:"Say Something..."}),ne.a.createElement("span",{className:"room-component-input-icon material-icons",title:"Attach image",onMouseDown:()=>this.upload_picture(),role:"button",tabIndex:0},"photo_camera"))};const e=Room.prototype.upload_picture;Room.prototype.upload_picture=function(){if(App.user.gold&&!X.legacyImages&&"channel"!==this.state.mode)return void e.call(this);MessagePictureUpload.prototype.handleSubmit=async function(e){var t;e.preventDefault();const o=document.getElementById("image");if(!o||!o.files)return;const n=o.files[0];MenuReactMicro.close();const r=So((await Go(n)).url,!0);r&&(null===(t=null===RoomClient||void 0===RoomClient?void 0:RoomClient.sendRitsuPicture)||void 0===t||t.call(RoomClient,r))};const t=ne.a.createElement(MenuMicro,null,ne.a.createElement(MessagePictureUpload,null));sn.a.render(t,document.getElementById("ui-hatch-2"))},Room.prototype.sendRitsuPicture=function(e){const{mode:t}=this.state;this.append(Do(e)),App.room.client.speak({message:Po(e),mode:t}),this.scroll()},MessagePictureUpload.prototype.body=function(){const e=bo();function t(e){const{text:t}=e;return ne.a.createElement("div",null,ne.a.createElement("b",null,"Note"),": ",t)}const o=ne.a.createElement("div",{className:"picture-upload-info"},ne.a.createElement(t,{text:Fo.destination}),ne.a.createElement(t,{text:Fo.ratelimit}),App.user._karma<10&&ne.a.createElement(t,{text:Fo.lowKarma})),n=e?" Choose a file":` Wait ${$.timeago(function(){const e=go().slice(0,-49);if(0===e.length)return 0;const t=Math.max(...e);return+new Date+(108e5-xe(new Date(t)))}())} before uploading again.`,r=ne.a.createElement("label",{htmlFor:"image"},ne.a.createElement("span",{className:"material-icons upload-thing",style:{cursor:e?"pointer":"not-allowed"}},e?"cloud_upload":"hourglass_top"),n),i=ne.a.createElement("input",{id:"image",className:"picture-upload-button",name:"image",type:"file",accept:"image/*",disabled:!e,onChange:()=>{var t;return e&&(null===(t=this.uploadImage)||void 0===t?void 0:t.call(this))}});return ne.a.createElement("form",{id:"picture_upload",name:"picture_upload","data-remote":"true",method:"post",action:ko},i,r,o)};const t=Room.prototype.received;Room.prototype.received=function(e){var o;const r=t.bind(this),i=null===(o=e.messages)||void 0===o?void 0:o[0];if(!i)return;const a=Bo(i);if(a)try{return void r(Do(a,e.user))}catch(e){e instanceof Error&&n.error(e.message)}else r(e)}}var Dr=o(29),Br=o.n(Dr);const Gr=e=>"Enter"===e.key&&!e.shiftKey;function Fr(e){if(!e.clipboardData)return;const{items:t}=e.clipboardData;Array.from(t).forEach(e=>{!async function(e){var t;if("file"!==e.kind)return;const o=e.getAsFile();if(o&&confirm("Are you sure you want to upload this image in chat?"))if(App.user.gold&&!X.legacyImages&&"channel"!==(null===RoomClient||void 0===RoomClient?void 0:RoomClient.state.mode)){const e=String(await new Promise(e=>{const t=new FileReader;t.onload=()=>{e(t.result)},t.readAsDataURL(o)}));null===RoomClient||void 0===RoomClient||RoomClient.send_picture(e)}else{const e=So((await Go(o)).url,!0);e&&(null===(t=null===RoomClient||void 0===RoomClient?void 0:RoomClient.sendRitsuPicture)||void 0===t||t.call(RoomClient,e))}}(e)})}function Vr(e){const t=te.get(X.blockReqs);e.friend_requests=e.friend_requests.filter(e=>{const o=new Date(e.data.sender.created_at),n=t!==Z.None&&xe(o)<864e5,r=App?App.room.muted.includes(e.sender_id):e.seen;return!n&&!r||(t!==Z.Reject||$.ajax({type:"GET",url:`/friends_decline?friend_id=${e.sender_id}&notification_id=${e.id}`,dataType:"json"}),!1)})}function zr(){return $.ajax({type:"GET",url:"/notifications_json",dataType:"json",success:function(e){Vr(e),NotificationsReact.setState({data:e})}}),"updated"}const Lr=e=>e?ne.a.createElement(Flair,{data:{string:e,flair:App.user.flair}}):null;function Hr(){const e=Message.prototype.process;Message.prototype.process=function(t){const o=e.bind(this),n=null===(a=null===(i=null===(r=App.user)||void 0===r?void 0:r.display_name)||void 0===i?void 0:i.replace(/[^\w\s]/g,""))||void 0===a?void 0:a.trim();var r,i,a;if(!n||!te.get(X.highlightMentions))return o(t);return Me(t,n,Lr,e=>Me(e,App.user.display_name,Lr,o))}}class Kr extends ne.a.Component{render(){const{href:e}=this.props,t=(e=>/^https?:\/\//.test(e)?e:"https://"+e)(e);try{const n=new URL(t),i=(r=n.host,Array.from(r.matchAll(/[^-._a-zA-Z0-9~]/g)).map(e=>e[0])),a=i.length>0,s=`⚠ Are you sure you want to open this link? ⚠\nNote that shady sites can guess your location and earmark your browser. Beware URLs on safe domains that look like redirects. The site you're about to visit is hosted by ${n.host}.`+((o=i).length>0?"\n⚠ Type this link yourself instead if you don't want to be fooled. ⚠\nThe following characters in the link look suspicious:\n"+o.map(et):"");return n.protocol.toLowerCase().startsWith("javascript")?e:ne.a.createElement("a",{className:"ritsu-message-anchor",href:a?"#":n.href,target:"_blank",onClick:e=>{confirm(s)&&!a||e.nativeEvent.preventDefault()},rel:"noreferrer"},t)}catch(t){return t instanceof Error&&n.error(t.message),e}var o,r}}const qr=e=>t=>e().some(e=>e.test(t)),Jr=qr(()=>[/\//g,/[^.]+?\.[^.]+?\.[^.]+?/g,/\.com|\.org|\.net|\.co\.uk|\.eu|\.us|\.gov|\.io/]),Wr=qr(()=>[/emeraldchat/gi,/grabify/gi,/ip-puller/gi,/hackingvision/gi,/iplogger/gi,/bit\.ly/gi,/blasze/gi,/ps3CFW/gi,/powercut/gi,/whatstheirip/gi,/\.gift/gi,/(^|https?:\/\/)\w{3}\.\w{2}(\/|$)/gi]),Yr=qr(()=>[/(^|https?:\/\/)(i\.)?ibb\.co(\/|$)/gi]),Qr=e=>{const t=ot(e),o=e||null;if(!Jr(t))return o;if(t.match(/^[^\s@]+@[^\s@]+(\.|(%2E))\u200b?[^\s@]+$/gi))return t;const n=te.get(X.ignoreURLBlacklist);return Yr(t)||!Wr(t)||n?ne.a.createElement(Kr,{href:t}):o};function Zr(e,t){return Ae(e,je(rt,`(${nt}|${it}){2,256}`,nt+"[a-z]{2,}",`\\b(\\/(${nt}|${it}|\\/)*)?`,"gi"),Qr,t)}const Xr=e=>e.split(""),ei=e=>{return t=2,function(e,t){const o=[];for(let n=0;n<e.length;n+=t){const r=e.slice(n,n+t);o.push(r)}return o}(e.split(""),t).map(e=>e.join(""));var t},ti={none:Xr("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"),italic:ei("𝘢𝘣𝘤𝘥𝘦𝘧𝘨𝘩𝘪𝘫𝘬𝘭𝘮𝘯𝘰𝘱𝘲𝘳𝘴𝘵𝘶𝘷𝘸𝘹𝘺𝘻𝘈𝘉𝘊𝘋𝘌𝘍𝘎𝘏𝘐𝘑𝘒𝘓𝘔𝘕𝘖𝘗𝘘𝘙𝘚𝘛𝘜𝘝𝘞𝘟𝘠𝘡"),bold:ei("𝗮𝗯𝗰𝗱𝗲𝗳𝗴𝗵𝗶𝗷𝗸𝗹𝗺𝗻𝗼𝗽𝗾𝗿𝘀𝘁𝘂𝘃𝘄𝘅𝘆𝘇𝗔𝗕𝗖𝗗𝗘𝗙𝗚𝗛𝗜𝗝𝗞𝗟𝗠𝗡𝗢𝗣𝗤𝗥𝗦𝗧𝗨𝗩𝗪𝗫𝗬𝗭𝟬𝟭𝟮𝟯𝟰𝟱𝟲𝟳𝟴𝟵"),boldItalic:ei("𝙖𝙗𝙘𝙙𝙚𝙛𝙜𝙝𝙞𝙟𝙠𝙡𝙢𝙣𝙤𝙥𝙦𝙧𝙨𝙩𝙪𝙫𝙬𝙭𝙮𝙯𝘼𝘽𝘾𝘿𝙀𝙁𝙂𝙃𝙄𝙅𝙆𝙇𝙈𝙉𝙊𝙋𝙌𝙍𝙎𝙏𝙐𝙑𝙒𝙓𝙔𝙕"),underline:ei("a͟b͟c͟d͟e͟f͟g͟h͟i͟j͟k͟l͟m͟n͟o͟p͟q͟r͟s͟t͟u͟v͟w͟x͟y͟z͟A͟B͟C͟D͟E͟F͟G͟H͟I͟J͟K͟L͟M͟N͟O͟P͟Q͟R͟S͟T͟U͟V͟W͟X͟Y͟Z͟0͟1͟2͟3͟4͟5͟6͟7͟8͟9͟"),squared:ei("🄰🄱🄲🄳🄴🄵🄶🄷🄸🄹🄺🄻🄼🄽🄾🄿🅀🅁🅂🅃🅄🅅🅆🅇🅈🅉🄰🄱🄲🄳🄴🄵🄶🄷🄸🄹🄺🄻🄼🄽🄾🄿🅀🅁🅂🅃🅄🅅🅆🅇🅈🅉"),squaredFull:ei("🅰🅱🅲🅳🅴🅵🅶🅷🅸🅹🅺🅻🅼🅽🅾🅿🆀🆁🆂🆃🆄🆅🆆🆇🆈🆉🅰🅱🅲🅳🅴🅵🅶🅷🅸🅹🅺🅻🅼🅽🅾🅿🆀🆁🆂🆃🆄🆅🆆🆇🆈🆉"),circled:Xr("ⓐⓑⓒⓓⓔⓕⓖⓗⓘⓙⓚⓛⓜⓝⓞⓟⓠⓡⓢⓣⓤⓥⓦⓧⓨⓩⒶⒷⒸⒹⒺⒻⒼⒽⒾⒿⓀⓁⓂⓃⓄⓅⓆⓇⓈⓉⓊⓋⓌⓍⓎⓏ⓪①②③④⑤⑥⑦⑧⑨"),superscript:Xr("ᵃᵇᶜᵈᵉᶠᵍʰᶦʲᵏˡᵐⁿᵒᵖᵠʳˢᵗᵘᵛʷˣʸᶻᴬᴮᶜᴰᴱᶠᴳᴴᴵᴶᴷᴸᴹᴺᴼᴾᵠᴿˢᵀᵁⱽᵂˣʸᶻ⁰¹²³⁴⁵⁶⁷⁸⁹"),medieval:ei("𝖆𝖇𝖈𝖉𝖊𝖋𝖌𝖍𝖎𝖏𝖐𝖑𝖒𝖓𝖔𝖕𝖖𝖗𝖘𝖙𝖚𝖛𝖜𝖝𝖞𝖟𝕬𝕭𝕮𝕯𝕰𝕱𝕲𝕳𝕴𝕵𝕶𝕷𝕸𝕹𝕺𝕻𝕼𝕽𝕾𝕿𝖀𝖁𝖂𝖃𝖄𝖅"),cursive:ei("𝒶𝒷𝒸𝒹𝑒𝒻𝑔𝒽𝒾𝒿𝓀𝓁𝓂𝓃𝑜𝓅𝓆𝓇𝓈𝓉𝓊𝓋𝓌𝓍𝓎𝓏𝒜𝐵𝒞𝒟𝐸𝐹𝒢𝐻𝐼𝒥𝒦𝐿𝑀𝒩𝒪𝒫𝒬𝑅𝒮𝒯𝒰𝒱𝒲𝒳𝒴𝒵"),cursiveBold:ei("𝓪𝓫𝓬𝓭𝓮𝓯𝓰𝓱𝓲𝓳𝓴𝓵𝓶𝓷𝓸𝓹𝓺𝓻𝓼𝓽𝓾𝓿𝔀𝔁𝔂𝔃𝓐𝓑𝓒𝓓𝓔𝓕𝓖𝓗𝓘𝓙𝓚𝓛𝓜𝓝𝓞𝓟𝓠𝓡𝓢𝓣𝓤𝓥𝓦𝓧𝓨𝓩"),monospace:Xr("ａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ０１２３４５６７８９"),smallcaps:Xr("ᴀʙᴄᴅᴇꜰɢʜɪᴊᴋʟᴍɴᴏᴘQʀꜱᴛᴜᴠᴡxʏᴢᴀʙᴄᴅᴇꜰɢʜɪᴊᴋʟᴍɴᴏᴘQʀꜱᴛᴜᴠᴡxʏᴢ"),hooked:Xr("αႦƈԃҽϝɠԋιʝƙʅɱɳσρϙɾʂƚυʋɯxყȥ"),boldSerif:ei("𝐚𝐛𝐜𝐝𝐞𝐟𝐠𝐡𝐢𝐣𝐤𝐥𝐦𝐧𝐨𝐩𝐪𝐫𝐬𝐭𝐮𝐯𝐰𝐱𝐲𝐳𝐀𝐁𝐂𝐃𝐄𝐅𝐆𝐇𝐈𝐉𝐊𝐋𝐌𝐍𝐎𝐏𝐐𝐑𝐒𝐓𝐔𝐕𝐖𝐗𝐘𝐙𝟎𝟏𝟐𝟑𝟒𝟓𝟔𝟕𝟖𝟗")};const oi=e=>e;function ni(e){const t=e.toLocaleLowerCase();return ne.a.createElement("span",Object.assign({},{className:"material-icons",title:t}),e.slice(2,-1))}function ri({length:e}){return e>1?[ne.a.createElement("br",null),ne.a.createElement("br",null)]:ne.a.createElement("br",null)}const ii={"[[":"squaredFull","((":"circled","{{":"medieval","*":"italic",h:"italic","**":"bold",R:"underline","***":"boldItalic","`":"monospace","^^":"superscript",",,":"hooked","<":"cursive","<<":"cursiveBold","~":"smallcaps"},ai=Object.getOwnPropertyNames(ii);function si(e){const t=ai.find(t=>e.startsWith(t)&&e.endsWith(function(e){return"[["===e?"]]":"(("===e?"))":"{{"===e?"}}":"*//"===e?"//*":"<<"===e?">>":"<"===e?">":e}(t)));if(void 0===t)return e;const o=e.slice(t.length,-t.length),n=t.slice(-1)[0];return o.split("").every(e=>e===n)?e:function(e,t){return t.split("").map(t=>{var o;const n=ti.none.indexOf(t);return null!==(o=ti[e][n])&&void 0!==o?o:t}).join("")}(ii[t],o)}function ci(e,t=oi){return function(e,t=oi){return Ae(e.replace(/^[\s\n]+|[\s\n]+$/g,""),/\n+/g,ri,t)}(e,e=>function(e,t=oi){return Ae(e,/m:[-_a-z]+:/gi,ni,t)}(e,e=>Zr(e,t)))}ai.sort((e,t)=>t.length-e.length);const li={shrug:"¯\\_(ツ)_/¯",tableflip:"(╯°□°）╯︵ ┻━┻",tableflip2:"(ノಠ益ಠ)ノ彡┻━┻",unflip:"┬──┬ ノ( ゜-゜ノ)"},ui={all:{rxelink:()=>RoomClient.send("Link to RxE extension for Emerald: "+Uo),rules:()=>RoomClient.send("For the updated ruleset please see: "+jo)},on:e=>({run:t=>(ui.all[e]=t,ui)}),prefix:".",process(e){if(!e.startsWith(ui.prefix))return!1;const t=e.slice(ui.prefix.length).split(" "),o=ui.findCommand(t[0]);return null==o||o(...t.slice(1)),!!o},findCommand(e){const t=Object.getOwnPropertyNames(ui.all).find(t=>t===e);return t?ui.all[t]:void 0},checkMail:e=>/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}/gi.test(e),processMail:e=>e.replace(/\./gi,".​")};function di(){var e;e=li,Object.entries(e).forEach(([e,t])=>ui.on(e).run(()=>RoomClient.send(t))),Room.prototype.send=function(e){const{mode:t}=this.state,o=this.process?this.process(e):function(e){if(!e)return null;const t=e.split(" ");let o="";return t.forEach(e=>{o+=" "+[e.slice(0,1),"‎",e.slice(1)].join("")}),o}(e);null!==o&&(this.append({messages:[o],user:App.user}),App.room.client.speak({message:o,mode:t}),this.scroll())},Room.prototype.process=function(e){return ui.process(e)?null:ui.checkMail(e)?ui.processMail(e):tt(function(e,t=oi){return Ae(e,/(?<=\s|^|\.,;!\?)(\*{1,3}|_{1,2}|~{1,2}|<{1,2}|`|\^\^|,,|\[{2}|\({2}|\{{2})\S(?:.*?\S)?(?:\1|\]{2}|\){2}|\}{2}|>{1,2})(?=\s|$|\.,;!\?)/g,si,t).join("")}(e))}}function mi(e,t,o){const n=e.split(/ +/g);if(n.length>36&&t){const e=n.slice(0,36).join(" ");return ne.a.createElement("span",null,ci(e)," ...",ne.a.createElement("span",Object.assign({className:"user-micropost-text-button"},Ue(o))," More"))}return ci(e,Micropost.prototype.youtube_process)}var fi=o(30),hi=o.n(fi);function pi(){le(hi.a);const e=Message.prototype.process;Message.prototype.process=function(t){const o=e.bind(this);return t.includes("youtu.be")||t.includes("youtube.com")?o(t):function(e,t=oi){if(at().test(e))return Ae(e,at(),e=>Io({url:"https://"+e}),()=>"");const o=Bo(e);return null!==o?Io(o):t(e)}(ot(t),e=>ci(e,o))},Micropost.prototype.content=function(){const{data:e,compact:t}=this.state;if(!e)return null;const{content:o}=e.micropost;return ne.a.createElement("div",{style:{width:"100%"}},mi(o,t,()=>this.more()))},Comment.prototype.content=function(){const{comment_data:e,compact:t}=this.state;if(!e)return null;const{content:o}=e.comment;return ne.a.createElement("div",{style:{width:"100%"}},mi(o,t,()=>this.more()))}}const gi=[[Room,"Room"],[UserProfile,"UserProfile"],[FriendUnit,"FriendUnit"],[Micropost,"Micropost"],[MessageNotificationUnit,"MessageNotificationUnit"],[Message,"Message"],[RoomUserUnit,"RoomUserUnit"],[UserUnit,"UserUnit"],[UserView,"UserView"],[Dashboard,"Dashboard"]];const bi=["safe","normal","unsafe"];function vi({preset:e,applyPreset:t}){return ne.a.createElement("div",null,ne.a.createElement("div",{className:"m1 "+mn.settingsSection},Y.introduction.presetsTitle),bi.map(o=>ne.a.createElement("div",null,ne.a.createElement("input",{type:"radio",id:"ritsu-preset-"+o,name:"preset",value:o,checked:o===e,onChange:()=>t(o)}),ne.a.createElement("label",{htmlFor:"ritsu-preset-"+o},Y.introduction.presets[o].title,ne.a.createElement("br",null)),ne.a.createElement("div",{className:"notification-menu-container-text"},Y.introduction.presets[o].content),ne.a.createElement("br",null))))}class yi extends ne.a.Component{constructor(){super({}),this.applyTheme=e=>{te.set(X.theme,e),document.body.classList.add("themeChange"),tr(),this.setState({theme:e}),setTimeout(()=>document.body.classList.remove("themeChange"),1e3)},this.applyFont=e=>{mr(),this.setState({font:e})},this.applyPreset=e=>{"safe"===e?(te.set(X.blockReqs,Z.Reject),te.set(X.imgBlur,!0),te.set(X.imgProtect,!0),te.set(X.showAnimatedImages,!1),te.set(X.toggleEmbeds,!1)):"normal"===e?(te.set(X.blockReqs,Z.None),te.set(X.imgBlur,!1),te.set(X.imgProtect,!0),te.set(X.showAnimatedImages,!0),te.set(X.toggleEmbeds,!0)):"unsafe"===e&&(te.set(X.blockReqs,Z.None),te.set(X.imgBlur,!1),te.set(X.imgProtect,!1),te.set(X.showAnimatedImages,!0),te.set(X.toggleEmbeds,!0)),this.setState({preset:e})};const{theme:e,font:t}=yr();this.state={theme:e,font:t,preset:"normal"}}render(){const{theme:e,font:t,preset:o}=this.state,n={fonts:{roboto:"Default Font",comic_sans:"Comic Sans MS",helvetica:"Helvetica",trebuchet:"Trebuchet MS",verdana:"Verdana"},currentFont:t,applyFont:this.applyFont};return ne.a.createElement(Menu,null,ne.a.createElement("div",{key:"custom_menu",className:mn.ritsuMenuContainer},Y.introduction.title,ne.a.createElement("br",null),ne.a.createElement("br",null),Y.introduction.content,ne.a.createElement(or,{theme:e,applyTheme:this.applyTheme}),ne.a.createElement(pr,Object.assign({},n)),ne.a.createElement(vi,{preset:o,applyPreset:this.applyPreset}),ne.a.createElement("div",{className:"ui-menu-buttons"},ne.a.createElement("div",{role:"button",tabIndex:0,className:"ui-button",onMouseDown:()=>{te.set(X.introductionCompletedVersion,1),MenuReact.close()}},"Save"))))}}function wi(){te.get(ee.introductionCompletedVersion)<1&&sn.a.render(ne.a.createElement(yi,null),document.getElementById("ui-hatch"))}function ki(e){const{version:t,changes:o}=e;return ne.a.createElement(Menu,null,ne.a.createElement("div",{key:"custom_menu",className:mn.ritsuMenuContainer},"Update available for RxE!",ne.a.createElement("br",null),ne.a.createElement("br",null),"Version ",t," of RxE is out!",ne.a.createElement("br",null),ne.a.createElement("br",null),"The changes are:-",ne.a.createElement("pre",{style:{fontFamily:"Arial, sans-serif",fontSize:"16px"}},o),ne.a.createElement("br",null),ne.a.createElement("br",null),"Visit the"," ",ne.a.createElement("a",{href:"https://github.com/Ritsu-Projects/Public-Releases/raw/main/ritsu-emerald.user.js"},"Github repositry")," ","or click"," ",ne.a.createElement("a",{href:"https://github.com/Ritsu-Projects/Public-Releases/raw/main/ritsu-emerald.user.js"},"here")," ","to update to the latest version!",ne.a.createElement("div",{className:"ui-menu-buttons"},ne.a.createElement("div",{role:"button",tabIndex:0,className:"ui-button",onMouseDown:()=>{MenuReact.close()}},"Close"))))}async function xi(){if(!te.get(X.notifyUpdates))return;const e=await fetch("https://raw.githubusercontent.com/Ritsu-Projects/Public-Releases/main/meta/VERSION"),t=await e.text(),o=await fetch("https://raw.githubusercontent.com/Ritsu-Projects/Public-Releases/main/meta/CHANGE_LOG"),n=await o.text();(function(e,t){const o=e.split("."),n=t.split(".");for(let e=0;e<4;e+=1){const t=Number(o[e]),r=Number(n[e]);if(t>r)return 1;if(t<r)return-1}return 0})(c,t.trim())<0&&sn.a.render(ne.a.createElement(ki,{version:t,changes:n}),document.getElementById("ui-hatch"))}function Ri(e,t){Array.from(e).forEach(e=>{e.style.width=t})}function Ci(){const e=document.getElementsByClassName(".room-component-center");document.querySelector(".room-component-right")?Ri(e,"calc(100% - 400px)"):Ri(e,"100%")}var Ai=o(31),Mi=o.n(Ai);const Ni=ActionCable.createConsumer();function Ei(e){setTimeout(()=>{const t=Ni.subscriptions.create({channel:"RoomChannel",room_id:e},{connected(){console.log(`# client connected to room[${e}] #`),t.unsubscribe()},disconnected:()=>console.log(`# client disconnected from room[${e}] #`)})},230)}function Si(){te.get(X.hideFromGc)&&setTimeout(()=>{!async function(){if(!App.user.mod&&!App.user.master)return;const e=App.room.join;App.room.join=function(t){e(t),Ei(t),App.room.client.speak=function(e){this.perform("speak",{message:e.message,id:t,mode:e.mode,picture:e.picture}),Ei(t)},App.room.client.typing=function(){}};const t=Room.prototype.room_reconnected;Room.prototype.room_reconnected=function(){t.call(this);const{id:e}=App.room;Ei(e)}}()},1e3)}const _i=[["7","7 seconds (warning)"],["120","2 minutes"],["300","5 minutes"],["600","10 minutes"],["900","15 minutes"],["1800","30 minutes"],["3600","1 hour"],["10800","3 hours"],["21600","6 hours"],["43200","12 hours"],["86400","1 day"],["31556952","Permanently"]],Ti=[{value:"spam",label:"Multiple spam attempts in chat"},{value:"harassment",label:"Harassment, threats and/or abuse towards a user or group of users"},{value:"sexual_harassment",label:"Sexually explicit remarks towards a user or group of users"},{value:"csa",label:"Distribution/Promotion of illegal content involving CP/CSA"},{value:"inappropriate_content",label:"Distribution/Promotion of illegal/explicit content"},{value:"underage",label:"Feel free to join our Group Chat, but you must be 18+ in order to use 1-on-1 Text Chat/Video Chat"},{value:"racism",label:"Spreading derogatory words/racism/bigotry in chat"},{value:"nudity",label:"Please don't start your video with nudity or sexual content, not everyone wants to see that"},{value:"socials",label:"Promotion of external social media"},{value:"english",label:"Please keep group chat in English"},{value:"other",label:"Other"}];class Ui extends oe.Component{constructor(e){super(e),this.handleDurationChange=e=>{this.setState({duration:e.target.value})},this.handleReasonChange=e=>{const t=e.target.value;this.setState({reason:t}),"Other"===t?this.setState({showCustomReason:!0,reason:""}):this.setState({showCustomReason:!1})},this.handleOtherReasonChange=e=>{this.setState({reason:e.target.value})},this.handleEditReasonToggle=()=>{this.setState(e=>({showCustomReason:!e.showCustomReason}))},this.state={duration:"120",reason:e.reasons[0].label,showCustomReason:!1}}renderDurationOption(e,t){return ne.a.createElement("option",{value:e},t)}renderReasonOption(e){return ne.a.createElement("option",{key:e.value,value:e.label},e.label)}render(){const{duration:e,reason:t,showCustomReason:o}=this.state,{reasons:n}=this.props;return ne.a.createElement("div",null,ne.a.createElement("div",null,"ISSUE BAN"),ne.a.createElement("br",null),ne.a.createElement("br",null),ne.a.createElement("div",{className:"m1"},"duration"),ne.a.createElement("label",{className:"ui-select",htmlFor:"duration"},ne.a.createElement("select",{name:"duration",id:"duration",value:e,onChange:this.handleDurationChange},_i.map(([e,t])=>this.renderDurationOption(e,t)))),ne.a.createElement("div",{className:"m1"},"reason"),o?ne.a.createElement("input",{type:"text",id:"reason",className:"ui-input",value:t,onChange:this.handleOtherReasonChange}):ne.a.createElement("label",{className:"ui-select",htmlFor:"reason"},ne.a.createElement("select",{name:"reason",id:"reason",value:t,onChange:this.handleReasonChange},n.map(e=>this.renderReasonOption(e)))),ne.a.createElement("div",{className:"m1"},ne.a.createElement("input",{type:"checkbox",id:"edit-reason-toggle",checked:o,onChange:this.handleEditReasonToggle}),ne.a.createElement("label",{htmlFor:"edit-reason-toggle"},"Edit Reason")))}}function ji(){ReportLogModeration.prototype.fetch_spam=function(){$.ajax({type:"GET",url:"/spam_moderation",dataType:"json",success:function(e){const t={spam_moderations:e};this.setState(t)}.bind(this)})},ReportLogModeration.prototype.componentDidMount=function(){this.fetch_data(),this.fetch_spam()},ReportLogModeration.prototype.render=function(){const e=this.state.spam_moderations,t=this.state.reeport_logs,o=function(){this.setState({sort:"max_count"===this.state.sort?"most_recent":"max_count"}),this.fetch_data()}.bind(this);return ne.a.createElement("div",{className:"dashboard-background"},ne.a.createElement("div",{className:"dashboard-container"},ne.a.createElement("div",{className:"meet-cards-container video-moderation"},ne.a.createElement("div",{className:"video-moderation-controls-container"},ne.a.createElement("button",{className:"ui-button-match-mega primary-button",onClick:o},"Sorted By"," ","max_count"===this.state.sort?"Max Count":"Most Recent"))),ne.a.createElement("div",{className:"meet-cards-container report-logs-container"},function(e,t){let o=[];return e&&(o=e.map(e=>e.id)),t.map(e=>ne.a.createElement(ReportLogModerationUnit,{key:"spam_moderation_"+e.id,has_report:o.includes(e.id),data:e}))}(e,t))))},ReportLogModerationUnit.prototype.renderContent=function(e){return e.image?ne.a.createElement("img",{alt:"",src:e.image}):e.message&&"string"==typeof e.message?ne.a.createElement("p",{className:"messages"},"Messages:",ne.a.createElement("br",null)," ",e.message):null},ReportLogModerationUnit.prototype.render=function(){const{data:e}=this.props,t=e.report_logs[this.state.selected],o=this.props.has_report;return ne.a.createElement("div",{className:"dashboard-button animated",style:{paddingTop:"30px",border:o?"4px solid red":""}},ne.a.createElement("div",{className:"room-component-message-left"},ne.a.createElement("img",{onMouseDown:t=>UserViewGenerator.generate({event:t,user:e}),src:e.display_picture,alt:"",className:"room-component-message-avatar"})),ne.a.createElement("div",{className:"info"},ne.a.createElement("p",null,e.display_name,ne.a.createElement("span",{style:{color:"gold"}},e.gold?" (G)":""))),ne.a.createElement("div",{className:"report-log-container"},ne.a.createElement("div",{className:"grid-item arrow",style:{marginLeft:"-15px"},title:"Previous",onClick:this.previous},ne.a.createElement("span",{className:"material-icons"},"arrow_back")),ne.a.createElement("div",{className:"grid-item weight"},(()=>{const{reason:e}=t;return e?ne.a.createElement("div",{className:"reason"},"Reason: ",t.reason):null})(),ne.a.createElement("div",{className:"reason"},"Username: ",t.username),this.renderContent(t)),ne.a.createElement("div",{className:"grid-item arrow",style:{marginRight:"-20px"},title:"Next",onClick:this.next},ne.a.createElement("span",{className:"material-icons"},"arrow_forward"))),ne.a.createElement("div",null,this.state.selected+1," out of ",e.report_logs.length))}}async function $i(e,t){const o="name"===t?"https://eme-log-82bd27c4e828.herokuapp.com/name-moderation":"https://eme-log-82bd27c4e828.herokuapp.com/picture-moderation",n=await fetch(o,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),r=await n.json();console.log("dataJson",r)}class Oi extends ne.a.Component{constructor(e){super(e),this.update=()=>{const e=setInterval(()=>{document.body.classList.contains("picModMounted")&&this.fetch()},15e3);this.setState({interval:e})},this.handleFetch=async e=>{const t=await At(e,this.approve,this.delete);this.setState({picture_moderations:t}),Rt(t.length)},this.fetch=()=>{$.ajax({type:"GET",url:"/picture_moderations",dataType:"json",success:this.handleFetch.bind(this)})},this.stateUpdate=e=>{const{picture_moderations:t}=this.state,o=t.filter(t=>t.id!==e),n={picture_moderations:o};Rt(o.length),this.setState(n)},this.findPicture=e=>{const{state:t}=this;return t.picture_moderations.find(t=>t.id===e)},this.approve=e=>{const t=this.findPicture(e),o=null==t?void 0:t.imageHash;o&&Ct(o,"approve"),$.ajax({type:"POST",url:`/picture_moderations/${e}/approve`,dataType:"json",success:this.stateUpdate.bind(this,e),error:t=>{404!==t.status&&403!==t.status||this.stateUpdate.bind(this,e)}});$i({action:"approve",pictureBase64:null==t?void 0:t.base64Image},"picture")},this.delete=e=>{const t=this.findPicture(e),o=null==t?void 0:t.imageHash;o&&Ct(o,"reject"),$.ajax({type:"DELETE",url:"/picture_moderations/"+e,dataType:"json",success:this.stateUpdate.bind(this,e),error:t=>{404!==t.status&&403!==t.status||this.stateUpdate.bind(this,e)}});$i({action:"reject",pictureBase64:null==t?void 0:t.base64Image},"picture")},this.approveSelectedElements=()=>{const{state:e}=this;e.selectedElements.slice().forEach(t=>{const o=e.picture_moderations.find(e=>e.id===t);o&&this.approve(o.id)}),this.setState({selectedElements:[]})},this.deleteSelectedElements=()=>{const{state:e}=this;e.selectedElements.slice().forEach(t=>{this.delete(t);const o=e.picture_moderations.findIndex(e=>e.id===t);e.picture_moderations.splice(o,1)}),this.setState({selectedElements:[]})},this.state={picture_moderations:[],selectedElements:[],interval:void 0}}componentDidMount(){document.body.classList.add("picModMounted"),this.fetch(),this.update()}componentWillUnmount(){const{interval:e}=this.state;e&&clearInterval(e),document.body.classList.remove("picModMounted")}toggleElementSelection(e){var t;const{picture_moderations:o,selectedElements:n}=this.state,r=null===(t=o.find(t=>t.id===e))||void 0===t?void 0:t.imageHash,i=o.filter(e=>e.imageHash===r).map(e=>e.id);let a;a=n.includes(e)?n.filter(e=>!i.includes(e)):[...n,...i],this.setState({selectedElements:a})}selectAllElements(){const{picture_moderations:e,selectedElements:t}=this.state,o=e.map(e=>e.id);o.every(e=>t.includes(e))?this.setState({selectedElements:[]}):this.setState({selectedElements:o})}actionButtons(){const{picture_moderations:e,selectedElements:t}=this.state;return ne.a.createElement("div",null,ne.a.createElement("button",{onClick:()=>{this.approveSelectedElements()},type:"button"},"Approve Selected Images"),ne.a.createElement("button",{onClick:()=>{this.deleteSelectedElements()},type:"button"},"Delete Selected Images"),ne.a.createElement("button",{onClick:()=>{this.selectAllElements()},type:"button"},t.length&&e.length===t.length?"Unselect All":"Select All"),ne.a.createElement("button",{onClick:Mt,type:"button"},"Clear Cache"))}render(){const{picture_moderations:e,selectedElements:t}=this.state,o=e=>{this.toggleElementSelection(e)};return ne.a.createElement("div",{className:"dashboard-container"},this.actionButtons(),ne.a.createElement("br",null),ne.a.createElement("div",{className:"meet-cards-container video-moderation"},e.map(e=>ne.a.createElement("div",{key:e.id,className:"checkmark-button-container"},ne.a.createElement(wt,{isSelected:t.includes(e.id),onClick:()=>o(e.id)}),ne.a.createElement(PictureModerationUnit,{key:"picture_moderation"+e.id,data:e,delete:this.delete,approve:this.approve})))),e.length?this.actionButtons():void 0,ne.a.createElement("br",null))}}function Pi(){SpamModeration.prototype.fetch_reports=function(){$.ajax({type:"GET",url:"/report_logs_moderation",dataType:"json",success:function(e){const t={report_logs:e};this.setState(t)}.bind(this)})},SpamModeration.prototype.componentDidMount=function(){this.fetch_data(),this.fetch_reports(),this.setState({sortByMessageCount:!1})},SpamModeration.prototype.sortMessages=function(){const{sortByMessageCount:e}=this.state;e?this.sortMessageCount():this.sortLastMessage()},SpamModeration.prototype.toggleSort=function(){this.sortMessages(),this.setState({sortByMessageCount:!this.state.sortByMessageCount}),this.forceUpdate()},SpamModeration.prototype.render=function(){const e=this.state.spam_moderations,t=this.state.report_logs;return this.sortMessages=this.sortMessages.bind(this),this.toggleSort=this.toggleSort.bind(this),ne.a.createElement("div",{className:"dashboard-background"},ne.a.createElement("div",{className:"dashboard-container"},ne.a.createElement("div",{className:"meet-cards-container video-moderation"},ne.a.createElement("button",{type:"button",onClick:this.toggleSort},this.state.sortByMessageCount?"Sort by message count":"Sort by last message"),ne.a.createElement("br",null),ne.a.createElement("br",null),function(e,t){let o=[];return t&&(o=t.map(e=>e.id)),e.map(e=>ne.a.createElement(SpamModerationUnit,{key:`spam_moderation_${e.id}_${e.content}`,has_report:o.includes(e.id),data:e}))}(e,t))))},SpamModeration.prototype.sortMessageCount=function(){const e=this.state.spam_moderations.sort((e,t)=>t.message_count-e.message_count);this.setState({spam_moderations:e})},SpamModeration.prototype.sortLastMessage=function(){const e=this.state.spam_moderations.sort((e,t)=>{const o=new Date(e.latest_message).getTime();return new Date(t.latest_message).getTime()-o});this.setState({spam_moderations:e})},SpamModerationUnit.prototype.render=function(){const{data:e}=this.props,t=this.props.has_report;let o=jQuery.timeago(new Date(e.latest_message));return"Now"!==o&&(o+=" ago"),ne.a.createElement("div",{className:"dashboard-button animated",style:{paddingTop:"30px",minHeight:"330px",border:t?"4px solid red":"",background:e.banned?"#2f0303":""}},ne.a.createElement("div",{className:"room-component-message-left"},ne.a.createElement("div",{style:{border:e.gold?"4px solid blue !important":""}},ne.a.createElement("div",null,e.gold?ne.a.createElement("img",{src:"https://emeraldchat.com/badges/tick.svg",alt:"",style:{zIndex:1,height:"25px",marginBottom:"-20px",marginRight:"-20px"}}):void 0,ne.a.createElement("img",{onMouseDown:t=>UserViewGenerator.generate({event:t,user:e}),src:e.display_picture,alt:"",className:"room-component-message-avatar"})))),ne.a.createElement("div",{className:"spam-user-info"},ne.a.createElement("p",null,"Name: ",e.display_name),ne.a.createElement("b",{style:{display:"flex"}},"Content:",ne.a.createElement("p",{style:{color:"orange",fontWeight:"bold"}}," "+e.content)),ne.a.createElement("p",null,"Last message: ",o),ne.a.createElement("p",null,"Message count: ",e.message_count)))}}class Ii extends ne.a.Component{constructor(e){super(e),this.update=()=>{const e=setInterval(()=>{document.body.classList.contains("picModMounted")&&this.fetch()},15e3);this.setState({interval:e})},this.handleFetch=async e=>{const t=await St(e,this.approve,this.delete);Nt(t.length),this.setState({display_name_moderations:t})},this.fetch=()=>{$.ajax({type:"GET",url:"/display_name_moderations",dataType:"json",success:this.handleFetch.bind(this)})},this.stateUpdate=e=>{const{display_name_moderations:t}=this.state,o=t.filter(t=>t.id!==e),n={display_name_moderations:o};Nt(o.length),this.setState(n)},this.findNameObj=e=>{const{state:t}=this;return t.display_name_moderations.find(t=>t.id===e)},this.approve=e=>{const t=this.findNameObj(e);if(!t)return;const o=t.new_display_name;o&&Et(o,"approve"),$.ajax({type:"POST",url:`/display_name_moderations/${e}/approve`,dataType:"json",success:this.stateUpdate.bind(this,e),error:t=>{404!==t.status&&403!==t.status||this.stateUpdate.bind(this,e)}});$i({nameModeration:o,action:"approve"},"name")},this.delete=e=>{const t=this.findNameObj(e);if(!t)return;const o=t.new_display_name;o&&Et(o,"reject"),$.ajax({type:"DELETE",url:"/display_name_moderations/"+e,dataType:"json",success:this.stateUpdate.bind(this,e),error:t=>{404!==t.status&&403!==t.status||this.stateUpdate.bind(this,e)}});$i({nameModeration:o,action:"reject"},"name")},this.approveSelectedElements=()=>{const{state:e}=this;e.selectedElements.slice().forEach(t=>{const o=e.display_name_moderations.find(e=>e.id===t);o&&this.approve(o.id)}),this.setState({selectedElements:[]})},this.deleteSelectedElements=()=>{const{state:e}=this;e.selectedElements.slice().forEach(t=>{this.delete(t);const o=e.display_name_moderations.findIndex(e=>e.id===t);e.display_name_moderations.splice(o,1)}),this.setState({selectedElements:[]})},this.state={display_name_moderations:[],selectedElements:[],interval:void 0}}componentDidMount(){document.body.classList.add("picModMounted"),this.fetch(),this.update()}componentWillUnmount(){const{interval:e}=this.state;e&&clearInterval(e),document.body.classList.remove("picModMounted")}toggleElementSelection(e){var t;const{display_name_moderations:o,selectedElements:n}=this.state,r=null===(t=o.find(t=>t.id===e))||void 0===t?void 0:t.new_display_name,i=o.filter(e=>e.new_display_name===r).map(e=>e.id);let a;a=n.includes(e)?n.filter(e=>!i.includes(e)):[...n,...i],this.setState({selectedElements:a})}selectAllElements(){const{display_name_moderations:e,selectedElements:t}=this.state,o=e.map(e=>e.id);o.every(e=>t.includes(e))?this.setState({selectedElements:[]}):this.setState({selectedElements:o})}actionButtons(){const{display_name_moderations:e,selectedElements:t}=this.state;return ne.a.createElement("div",null,ne.a.createElement("button",{onClick:()=>{this.approveSelectedElements()},type:"button"},"Approve Selected Names"),ne.a.createElement("button",{onClick:()=>{this.deleteSelectedElements()},type:"button"},"Delete Selected Names"),ne.a.createElement("button",{onClick:()=>{this.selectAllElements()},type:"button"},t.length&&e.length===t.length?"Unselect All":"Select All"),ne.a.createElement("button",{onClick:_t,type:"button"},"Clear Cache"))}render(){const{display_name_moderations:e,selectedElements:t}=this.state,o=e=>{this.toggleElementSelection(e)};return ne.a.createElement("div",{className:"dashboard-container"},this.actionButtons(),ne.a.createElement("br",null),ne.a.createElement("div",{className:"meet-cards-container video-moderation"},e.map(e=>ne.a.createElement("div",{key:e.id,className:"checkmark-button-container"},ne.a.createElement(wt,{isSelected:t.includes(e.id),onClick:()=>o(e.id)}),ne.a.createElement(DisplayNameModerationUnit,{key:"picture_moderation"+e.id,data:e,delete:this.delete,approve:this.approve})))),e.length?this.actionButtons():void 0,ne.a.createElement("br",null))}}function Di(){VideoModerationUnit.prototype.render=function(){const{data:e}=this.props;return ne.a.createElement("div",{className:"dashboard-button animated",style:{paddingTop:"30px"}},ne.a.createElement("div",{className:"room-component-message-left"},ne.a.createElement("img",{onMouseDown:t=>{UserViewGenerator.generate({event:t,user:e})},src:e.display_picture,alt:"",className:"room-component-message-avatar"})),ne.a.createElement("p",null,e.display_name+(e.gold?"(G)":"")),ne.a.createElement("div",{className:"images-container"},ne.a.createElement("div",{className:"grid-item arrow",style:{marginLeft:"-15px"},title:"Previous",onClick:this.previous},ne.a.createElement("span",{className:"material-icons"},"arrow_back")),ne.a.createElement("img",{className:"grid-item",alt:"",src:e.images[this.state.imageId],onMouseDown:()=>(e=>{const t=ne.a.createElement(Picture,{data:{src:e}});sn.a.render(t,document.getElementById("ui-hatch-2"))})(e.images[this.state.imageId])}),ne.a.createElement("div",{className:"grid-item arrow",style:{marginRight:"-20px"},title:"Next",onClick:this.next},ne.a.createElement("span",{className:"material-icons"},"arrow_forward"))),ne.a.createElement("div",null,this.state.imageId+1," out of ",e.images.length),ne.a.createElement("button",{className:"ui-button-match-mega gold-button",type:"button",onClick:this.delete},"Delete"))}}function Bi(){le(Mi.a),Pi(),ji(),PictureModeration=Oi,PictureModerationUnit.prototype.render=function(){const{data:e}=this.props;return ne.a.createElement("div",{className:"dashboard-button animated",style:{paddingTop:"30px",height:"400px"}},ne.a.createElement("div",null,ne.a.createElement("img",{src:e.image_url,onMouseDown:function(){const t=ne.a.createElement(Picture,{data:{src:e.image_url}});sn.a.render(t,document.getElementById("ui-hatch-2"))},alt:"",className:"mod-approval-pic"})),ne.a.createElement("div",{onMouseDown:async t=>{let o;o=this.state?this.state.user:(await xt(e.user_id)).user,this.setState({user:o}),UserViewGenerator.generate({event:t,user:o})}},ne.a.createElement("h2",null,`${e.display_name}(${e.username})`)),ne.a.createElement("button",{className:"ui-button-match-mega gold-button",onClick:this.approve,type:"button"},"Approve"),ne.a.createElement("button",{className:"ui-button-match-mega red-button",onClick:this.delete,type:"button"},"Reject"))},DisplayNameModeration=Ii,DisplayNameModerationUnit.prototype.render=function(){const{data:e}=this.props;return ne.a.createElement("div",{className:"dashboard-button animated",style:{paddingTop:"30px",height:"300px"}},ne.a.createElement("div",{onMouseDown:async t=>{let o;o=this.state?this.state.user:(await xt(e.user_id)).user,this.setState({user:o}),UserViewGenerator.generate({event:t,user:o})}},ne.a.createElement("h2",{style:{whiteSpace:"normal"}},"New: ",e.new_display_name),ne.a.createElement("h2",{style:{whiteSpace:"normal"}},"Old: ",e.old_display_name),ne.a.createElement("h2",null,"(",this.props.data.username,")")),ne.a.createElement("button",{className:"ui-button-match-mega gold-button",onClick:this.approve},"Approve"),ne.a.createElement("button",{className:"ui-button-match-mega red-button",onClick:this.delete},"Reject"))},Di(),Si(),ModPanel.prototype.issue_ban_menu=function(){return ne.a.createElement(Ui,{reasons:Ti})}}!async function(){const e=`(${[]})`;n.log(`${a} Version ${c} ${e}`),async function(){Notifications.prototype.update=zr,NotificationsReact&&(NotificationsReact.update=zr,NotificationsReact.state&&NotificationsReact.state.data?Vr(NotificationsReact.state.data):console.warn("failed to filter friend requests early"))}(),await(async e=>{for(;!e();)await he()})(()=>!!x.App),gi.forEach(([e,t])=>{e.displayName=t}),yn(),function(){if("undefined"==typeof GM_getValue)return;const e=GM_getValue("theme",!1);e&&(te.set(X.theme,e),n.log("Migrated THEME"),GM_deleteValue("theme"));const t=GM_getValue("hacks",!1);t&&(te.set(X.adBlocker,!!t.disableNags),te.set(X.fancyColors,!!t.fancyColors),n.log("Migrated HACKS"),GM_deleteValue("hacks"));const o=GM_getValue("settings",!1);o&&(te.set(X.imgControl,!!o.imgControl),te.set(X.imgProtect,!!o.imgProtect),te.set(X.showInfo,!!o.showInfo),n.log("Migrated SETTINGS"),GM_deleteValue("settings"));const r=GM_getValue("blockedPictures",!1);if(r instanceof Array){const e=[...te.get(X.blockedHashes)];r.forEach(t=>{e.includes(t)||e.push(t)}),te.set(X.blockedHashes,e),n.log("Migrated BLOCKED PICTURES"),GM_deleteValue("blockedPictures")}const i=GM_getValue("savedPictures",!1);if(i instanceof Array){const e=[...te.get(X.savedPictures)];i.forEach(t=>{e.includes(t)||e.push(t)}),te.set(X.savedPictures,e),n.log("Migrated SAVED PICTURES"),GM_deleteValue("savedPictures")}}(),Sn(),rn(),le(De.a),document.body.addEventListener("mouseup",({target:e})=>{e instanceof HTMLElement&&e.classList.contains("mute-button")&&Cookies.set("muted",MuteButtonClient.state.muted?"t":"")}),MuteButton.prototype.componentDidMount=function(){const e=Cookies.get("muted");this.setState({muted:"t"===e||void 0===e})},wr(),Ko(),wn.load(),kn.load(),le(Ze.a),zt(),Kt(),le(Dt.a),function(){const e=RoomChannelSelect.prototype.join;RoomChannelSelect.prototype.join=function(t){t.members&&(t.members=ke(t.members)),e.call(this,t)};const t=RoomPrivate.prototype.setState;function o(){var e,t;null===(e=document.querySelector(".wfaf"))||void 0===e||e.classList.remove("channel-unit-active"),null===(t=document.querySelector(".private-rooms"))||void 0===t||t.classList.remove("channel-unit-active"),ue(App.room.client,"received",Ye,!0)}RoomPrivate.prototype.setState=function(e){return e&&"online"in e&&(e.online=ke(e.online)),e&&"offline"in e&&(e.offline=ke(e.offline)),t.call(this,e)},ue(App.room,"join",o),App.room.client&&o()}(),function(){const e=te.get(X.showGender);document.documentElement.classList.toggle("showGender",e),le(gt.a);const t=MessageNotificationUnit.prototype.image;MessageNotificationUnit.prototype.image=function(){return bt.call(this,t)};const o=NotificationUnit.prototype.image;NotificationUnit.prototype.image=function(){return bt.call(this,o)};const n=SearchUnit.prototype.body;SearchUnit.prototype.body=function(){return bt.call(this,n)};const r=UserUnit.prototype.body;UserUnit.prototype.body=function(){return bt.call(this,r)};const i=FriendUnit.prototype.body;FriendUnit.prototype.body=function(){return bt.call(this,i)};const a=RoomUserUnit.prototype.body;RoomUserUnit.prototype.body=function(){return bt.call(this,a)};const s=Message.prototype.render;Message.prototype.render=function(){var e,t;const o=s.apply(this);return o&&"object"==typeof o&&"props"in o&&(o.props.children[0].props.children=ne.a.cloneElement(o.props.children[0].props.children,{"data-gender":null!==(t=null===(e=$e(this.props.data.user))||void 0===e?void 0:e.gender)&&void 0!==t?t:""})),o}}(),Wo(),$r(),function(){RoomChannelMembers.prototype.body=function(){const{members:e}=this.state;if(!e)return null;if(e.length<1)return ne.a.createElement("div",{className:"room-component-module"},ne.a.createElement("div",{className:"room-user-label"},Ar));const t=ke(e).map(e=>ne.a.createElement(UserUnit,{key:e.id,data:e}));return ne.a.createElement("div",{className:"room-component-module"},ne.a.createElement("div",{className:"room-user-label"},Ar,"online — "+e.length,Nr),t)};const e=RoomChannelMembers.prototype.setState;RoomChannelMembers.prototype.setState=function(t){var o;if(!t||!("members"in t))return;this.state.members||console.warn("this.state.members is falsy despite declaration");const n=ke(null!==(o=this.state.members)&&void 0!==o?o:[]).map(e=>e.id),r=ke(t.members),[i,a]=te.get(X.userSort).split("."),s="asc"===a?"asc":"desc";"age"===i?be(r,"id",ge(pe.numeric),s,!0):be(r,"display_name",pe.string,s,!0),r.forEach(e=>{var t;n.some((t=e.id,e=>t===e))||x.RxE.dispatchEvent("room.userlist",e)}),t.members=r,e.call(this,t)},Room.prototype.disconnected=function(e){"channel"===this.state.mode&&RoomChannelMembersClient.remove_member(e.user)},le(Cr.a)}(),function(){function e(){NotificationsReact.update(),null===UserViewReact||void 0===UserViewReact||UserViewReact.forceUpdate(),null===RoomClient||void 0===RoomClient||RoomClient.forceUpdate()}App.room.muted.push(...te.get(X.permaMuteList).map(e=>e[0])),UserView.prototype.bottom=function(){const{id:e}=this.state.user,t=App.room.muted.includes(e),o=te.get(X.permaMuteList).map(e=>e[0]).includes(e);return ne.a.createElement("div",{className:"user-profile-micro-bottom"},ne.a.createElement("div",{onMouseDown:this.view_profile.bind(this),className:"user-profile-micro-button"},"View Profile"),ne.a.createElement("div",{onMouseDown:this.message.bind(this),className:"user-profile-micro-button"},"Message"),this.mod_button(),ne.a.createElement("div",{onMouseDown:t?this.unmute.bind(this):this.mute.bind(this),className:"user-profile-micro-button",disabled:o},t?"Unmute":"Mute"),ne.a.createElement("div",{onMouseDown:o?this.permaunmute.bind(this):this.permamute.bind(this),className:"user-profile-micro-button"},o?"Perma Unmute":"Perma Mute"),ne.a.createElement("div",{onMouseDown:this.report_type.bind(this),className:"user-profile-micro-button"},"Report"),ne.a.createElement("div",{onMouseDown:this.close.bind(this),className:"user-profile-micro-button"},"Close"))},UserView.prototype.permamute=function(){const{id:t,display_name:o}=this.state.user;ho.addItem({key:t,item:o},X.permaMuteList),App.room.mute(t,o,"Permamuted by user"),e()},UserView.prototype.permaunmute=function(){const{id:t}=this.state.user;ho.removeItem({key:t},X.permaMuteList),App.room.unmute(t),e(),We(t)},UserView.prototype.mute=function(){App.room.mute(this.state.user.id),this.setState({muted:!0}),e()},UserView.prototype.unmute=function(){const{id:t}=this.state.user;App.room.unmute(t),this.setState({muted:!1}),e(),We(t)}}(),Ir(),function(){function e(e){const{data:t}=this.state;void 0!==t&&(t.comments.unshift(e.comment.id),this.setState({data:t,compact:this.state.compact,reply:!0}))}function t(e){const t=this.state.data||{microposts:[]};this.setState({data:{microposts:[e.micropost.id,...t.microposts]}})}function o(){return this.state.reply?ne.a.createElement("div",{className:"animated zoomIn user-comment-input-background"},ne.a.createElement("textarea",{className:"user-comment-input",onKeyDown:this.comment_input.bind(this),id:"comment-input",placeholder:"Comment..."})):null}le(Br.a),Room.prototype.input=function(e){const t=$(e.target),o=""+t.val(),n="ArrowUp"===e.key&&this.state.last_message;Gr(e)?(this.send(o),this.setState({last_message:o}),t.val(""),t.css("height","34px")):n&&t.val(this.state.last_message),0!==o.length&&o.includes("\n")||t.css("height","34px");const r=t.get(0);r.style.height=r.scrollHeight+"px",document.onpaste=Fr,null===RoomClient||void 0===RoomClient||RoomClient.scroll(),(Gr(e)||n)&&e.preventDefault(),Gr(e)||App.room.client.typing()},Micropost.prototype.comment_input=function(t){var o;if(!Gr(t))return;const n=$(t.target),r=encodeURIComponent(""+n.val());this.setState({data:this.state.data,reply:!1,compact:this.state.compact}),n.val(""),t.preventDefault(),n.trigger("blur");const i=null===(o=this.state.data)||void 0===o?void 0:o.micropost.id;void 0!==i&&$.ajax({type:"GET",url:`/comments_create?id=${i}&content=${r}`,dataType:"json",success:e.bind(this)})},Microposts.prototype.micropost_input=function(e){if(e.target instanceof HTMLInputElement)return;const o=$(e.target),n=encodeURIComponent(""+o.val());if(!Gr(e))return;o.val(""),o.trigger("blur"),e.preventDefault();const r=this.props.data.wall_id;$.ajax({type:"GET",url:`/microposts_create?id=${r}&content=${n}`,dataType:"json",success:t.bind(this)})},Microposts.prototype.render=function(){const e=this.state.data?this.state.data.microposts:[],t=ne.a.createElement("div",{className:"user-microposts"},e.map(e=>ne.a.createElement(Micropost,{key:e,data:{id:e}}))),o=ne.a.createElement("div",{className:"user-micropost-input-background"},ne.a.createElement("textarea",{className:"user-micropost-input",onKeyDown:this.micropost_input.bind(this),id:"micropost-input",placeholder:"Say Something..."}));return ne.a.createElement("span",{key:this.props.data.wall_id},o,t)},Micropost.prototype.write_comment=o,Comment.prototype.write_comment=o}(),Hr(),pi(),di(),wi(),xi(),Bi(),function(){if(!te.get(X.hideTyping))return;const e=App.room.join;App.room.join=function(t){e.call(this,t),App.room.client.typing=function(){}}}(),le(ro.a),le(yt.a),function(e){function t(){e.forEach(e=>e())}let o;new MutationObserver(()=>{cancelAnimationFrame(o),o=requestAnimationFrame(t)}).observe(document.body,{subtree:!0,childList:!0}),t()}([Ci,Xe,so,_n,xr,Pt,Rn,ht,qo,Ge,ft,jr])}()}]);